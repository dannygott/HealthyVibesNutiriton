import{C as be,A as ye,_ as et}from"./FormComponent.vue_vue_type_style_index_1_lang.d728186a.js";import{d as tt,U as at,H as ot,k as st,r as k,T as nt,g as p,K as O,$ as lt,o as it,s as ee,a as l,c as i,b as s,D as P,f as te,h as t,V as M,t as d,e as T,j as c,n as rt,w as ke,v as dt,i as $,m as N,F as Ce,l as we,X as ct,x as ut,y as mt,Z as De,_ as pt}from"./entry.ccfebbe1.js";import{u as ht}from"./composables.6e31dd6d.js";/* empty css            */import{j as m,t as ft,o as _t,p as gt,r as vt,q as bt,P as yt}from"./helpers.9a9d5058.js";import{L as kt,a as Ct,l as wt,_ as St}from"./advancedFormat.7978846e.js";import{t as Dt,u as zt}from"./timezone.4c6faa44.js";import{s as Se,_ as xt}from"./TextElement.vue_vue_type_style_index_0_lang.00d54afa.js";import{i as Lt,f as Mt}from"./funnel_event_helper.bd666bbb.js";import{_ as F}from"./MoonLoader.vue_vue_type_style_index_0_lang.15aaa70a.js";import{s as Tt,g as qt,i as Yt}from"./utils.c7339651.js";import"./v4.9a3e6124.js";import"./Countries.69e07731.js";import"./Attributions.46f38b13.js";import"./index.98bfb2b5.js";import"./FunnelServices.6e08424a.js";import"./HLConst.c4c5e8b3.js";import"./InputText.vue_vue_type_script_setup_true_lang.e9424c7f.js";import"./index.78c17736.js";import"./Recaptcha.vue_vue_type_script_setup_true_lang.e4363a08.js";import"./optimize_script.3eba72ba.js";import"./IntlTel.7d5c59dd.js";const C=_=>(ut("data-v-a6d7a654"),_=_(),mt(),_),Rt={id:"app",ref:"app"},Bt=["onSubmit"],It=["id"],Ot={key:0,class:"hl_widget-header"},Pt={key:0},Ft={key:1,class:"hl_widget-header"},Et=C(()=>s("button",{type:"button",class:"hl_widget-close"},"\xD7",-1)),Vt={key:2,class:"hl_widget-header"},At=C(()=>s("button",{type:"button",class:"hl_widget-close"},"\xD7",-1)),Ut={class:"hl_widget-wrapper"},$t={key:0,class:"hl_widget-form"},Nt={key:0},Ht=["src"],jt=C(()=>s("hr",{class:"title-border"},null,-1)),Wt={key:1,class:"hl_widget_top_space"},Zt={class:"hl_widget-step1"},Qt={key:0,class:"hl_form-group",style:{"max-width":"300px"}},Gt={class:"hl_widget--pick-date-time"},Kt={class:"hl_widget--pick-date"},Xt={class:"cal-title"},Jt={key:0,class:"multiple-cal-container"},ea={class:"option__desc"},ta={class:"option__title"},aa={class:"relative"},oa={key:1,class:"no-slots-block"},sa=C(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",class:"bi bi-chevron-right",viewBox:"0 0 16 16"},[s("path",{"fill-rule":"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"})],-1)),na={class:"timezone-picker-group"},la={class:"option__desc"},ia={class:"option__title"},ra={class:"option_sub_title"},da={class:"details-item-step2"},ca=C(()=>s("svg",{width:"20",height:"20",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},[s("path",{fill:"339af0",d:"M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z"})],-1)),ua=[ca],ma={key:0,class:"text-capitalize"},pa=["onClick"],ha={style:{cursor:"pointer","text-decoration":"underline",color:"#178af6"}},fa={class:"pointer"},_a={key:0,class:"loader"},ga={key:1,class:"pick-hours--wrap"},va={class:"pick-hours--am"},ba={key:0},ya=["id"],ka=["value","id","checked"],Ca=["for","onClick","textContent"],wa=["onClick","disabled"],Sa={class:"pick-hours--pm"},Da={key:0},za=["id"],xa=["value","id","checked"],La=["for","textContent","onClick"],Ma=["onClick"],Ta={key:0,class:"hl_form-group has-error"},qa={class:"error"},Ya={class:"details-item"},Ra=C(()=>s("svg",{width:"20",height:"20",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},[s("path",{fill:"339af0",d:"M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z"})],-1)),Ba=[Ra],Ia={key:1,class:"btn-back pl-0 pr-3 disable-back-btn"},Oa=C(()=>s("svg",{width:"20",height:"20",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},[s("path",{fill:"339af0",d:"M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z"})],-1)),Pa=[Oa],Fa={key:0,class:"mb-1 d-flex align-items-center mr-2 step3-btns step3-btns--ts-btn"},Ea=C(()=>s("svg",{width:"15",height:"15",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M1024 544v448q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h224v-352q0-14 9-23t23-9h64q14 0 23 9t9 23zm416 352q0-148-73-273t-198-198-273-73-273 73-198 198-73 273 73 273 198 198 273 73 273-73 198-198 73-273zm224 0q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"})],-1)),Va={class:"mx-2"},Aa={key:0,class:"ml-2"},Ua={key:1,class:"d-flex align-items-center mb-1 step3-btns"},$a=C(()=>s("svg",{width:"15",height:"15",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M192 1664h1408v-1024h-1408v1024zm384-1216v-288q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v288q0 14 9 23t23 9h64q14 0 23-9t9-23zm768 0v-288q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v288q0 14 9 23t23 9h64q14 0 23-9t9-23zm384-64v1280q0 52-38 90t-90 38h-1408q-52 0-90-38t-38-90v-1280q0-52 38-90t90-38h128v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h384v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h128q52 0 90 38t38 90z"})],-1)),Na={class:"ml-2 text-capitalize"},Ha={key:1},ja={key:4,class:"hl_widget-body"},Wa=["textContent"],Za={key:1},Qa={class:"hl_form-group"},Ga=["placeholder"],Ka={key:5,class:"hl_widget-body"},Xa={key:6,class:"hl_widget-body"},Ja={key:0,class:"hl_events-buttons"},eo=["href"],to={xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"22",height:"22",viewBox:"0 0 48 48",style:{fill:"#000000"}},ao=De('<g id="surface1" data-v-a6d7a654><path style="fill:#e0e0e0;" d="M 5.5 40.5 L 42.5 40.5 C 44.433594 40.5 46 38.933594 46 37 L 46 11 C 46 9.066406 44.433594 7.5 42.5 7.5 L 5.5 7.5 C 3.566406 7.5 2 9.066406 2 11 L 2 37 C 2 38.933594 3.566406 40.5 5.5 40.5 Z " data-v-a6d7a654></path><path style="fill:#d9d9d9;" d="M 26 40.5 L 42.5 40.5 C 44.433594 40.5 46 38.933594 46 37 L 46 11 C 46 9.066406 44.433594 7.5 42.5 7.5 L 5.5 7.5 C 3.566406 7.5 2 9.066406 2 11 Z " data-v-a6d7a654></path><path style="fill:#eeeeee;" d="M 6.746094 40.5 L 42.5 40.5 C 44.433594 40.5 46 38.933594 46 37 L 46 11.5 Z " data-v-a6d7a654></path><path style="fill:#e0e0e0;" d="M 25.746094 40.5 L 42.5 40.5 C 44.433594 40.5 46 38.933594 46 37 L 46 11.5 L 18.769531 31.617188 Z " data-v-a6d7a654></path><path style="fill:#ca3737;" d="M 42.5 9.5 L 5.5 9.5 C 3.566406 9.5 2 9.066406 2 11 L 2 37 C 2 38.933594 3.566406 40.5 5.5 40.5 L 7 40.5 L 7 12 L 41 12 L 41 40.5 L 42.5 40.5 C 44.433594 40.5 46 38.933594 46 37 L 46 11 C 46 9.066406 44.433594 9.5 42.5 9.5 Z " data-v-a6d7a654></path><path style="fill:#f5f5f5;" d="M 42.5 7.5 L 5.5 7.5 C 3.566406 7.5 2 9.035156 2 11 C 2 12.207031 3.519531 13.257813 3.519531 13.257813 L 24 27.757813 L 44.480469 13.257813 C 44.480469 13.257813 46 12.207031 46 11 C 46 9.035156 44.433594 7.5 42.5 7.5 Z " data-v-a6d7a654></path><path style="fill:#e84f4b;" d="M 43.246094 7.582031 L 24 21 L 4.753906 7.582031 C 3.179688 7.917969 2 9.296875 2 11 C 2 12.207031 3.519531 13.257813 3.519531 13.257813 L 24 27.757813 L 44.480469 13.257813 C 44.480469 13.257813 46 12.207031 46 11 C 46 9.296875 44.820313 7.917969 43.246094 7.582031 Z " data-v-a6d7a654></path></g>',1),oo=[ao],so={class:"calendar-button__text"},no=["href"],lo={xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"22",height:"22",viewBox:"0 0 48 48",style:{fill:"#000000"}},io=De('<g id="surface1" data-v-a6d7a654><path style="fill:#03a9f4;" d="M 21 31 C 21 32.105469 21.894531 33 23 33 L 40 33 C 41.105469 33 42 32.105469 42 31 L 42 16 C 42 14.894531 41.105469 14 40 14 L 23 14 C 21.894531 14 21 14.894531 21 16 Z " data-v-a6d7a654></path><path style="fill:#b3e5fc;" d="M 42 16.976563 L 42 16 C 42 15.570313 41.863281 15.175781 41.632813 14.851563 L 30.367188 21.785156 L 22.828125 17.128906 L 22.125 19 L 30.585938 24 Z " data-v-a6d7a654></path><path style="fill:#0277bd;" d="M 27 41.460938 L 6 37.460938 L 6 9.460938 L 27 5.460938 Z " data-v-a6d7a654></path><path style="fill:#ffffff;" d="M 21.214844 18.3125 C 20.117188 17.035156 18.671875 16.398438 16.886719 16.398438 C 14.996094 16.398438 13.480469 17.066406 12.335938 18.402344 C 11.191406 19.738281 10.613281 21.488281 10.613281 23.648438 C 10.613281 25.691406 11.179688 27.359375 12.304688 28.632813 C 13.429688 29.90625 14.898438 30.542969 16.683594 30.542969 C 18.523438 30.542969 20.015625 29.890625 21.15625 28.566406 C 22.300781 27.253906 22.867188 25.523438 22.867188 23.367188 C 22.867188 21.28125 22.316406 19.59375 21.214844 18.3125 Z M 19.050781 26.734375 C 18.480469 27.503906 17.710938 27.886719 16.734375 27.886719 C 15.796875 27.886719 15.035156 27.492188 14.449219 26.699219 C 13.871094 25.914063 13.582031 24.839844 13.582031 23.488281 C 13.582031 22.152344 13.871094 21.074219 14.449219 20.265625 C 15.035156 19.453125 15.820313 19.054688 16.804688 19.054688 C 17.769531 19.054688 18.523438 19.445313 19.074219 20.230469 C 19.628906 21.027344 19.90625 22.125 19.90625 23.539063 C 19.90625 24.90625 19.617188 25.96875 19.050781 26.734375 Z " data-v-a6d7a654></path></g>',1),ro=[io],co={class:"calendar-button__text"},uo={key:7,class:"hl_widget-footer"},mo={key:0},po=["onClick","disabled"],ho={key:8,class:"hl_widget-footer"},fo=["disabled"],_o=tt({__name:"CalendarComponent",props:{calendarData:{type:Object,required:!0},redirect:{type:Boolean,default:!0},funnelPreview:{type:Boolean,default:!1},calendarElementClass:{type:String,required:!1},pageUrl:{type:String,default:void 0},baseReferrrer:{type:String,default:void 0},urlParams:{type:Object,default:void 0},stickyContactData:{type:Object,default:void 0},stickyContactFingerprint:{type:String,default:void 0}},emits:["on-submit","moveToNextMonth"],setup(_,{emit:ze}){const H=_;m.extend(kt),m.extend(Ct),m.extend(Dt),m.extend(zt),m.extend(wt);const{t:r,locale:D}=at(),v=ot(),z=st().public,ae=z.baseUrl,j=k(),oe=k(),se=k(),W=k(),E=k([]),ne=k(),le=k(),V=m.tz.guess(),x=k("en"),ie=k(),e=nt({baseUrl:z.baseUrl,formData:{},calendarId:"",timezone:V,appointmentDate:m().tz(V).format("YYYY-MM-DD"),filterTimezone:"",availableTimezones:[],use24hTimezone:!1,selectedCalendar:null,allLocationData:[],events:[],daySlots:{},selectedSlot:null,isLoading:!0,notes:"",step:1,seqCall:0,serverError:"",popup:!1,eventId:void 0,event:void 0,fetchedMonth:null,AMVisibleSlot:4,PMVisibleSlot:4,openPayForm:!1,noCalendarError:!1,phone:"",checkboxRequiredStore:[],errorCheckboxList:[],checkBoxCheckedVal:[],stickyContact:!1,formLabelColor:"",buttonName:"Book appointment",selectedTimezone:"",timezones:ft,availableTime:[],calendarStartingDate:m().tz(V).format("YYYY-M-D"),calendarRange:{from:m().tz(V).subtract(2,"days").format("YYYY-M-D")},disableContactTimezone:!1,disableBackBtn:!1,showNoDates:!1,isNextMonthDisabled:!1,timezoneChangeState:!1,lang:void 0,startDayOfWeek:"1",noEventFound:!1,thanksMsg:void 0,appointmentIds:[],creatingAppointment:!1,showRecurringSlots:!1,loadingRecurringSlots:!1,recurringSlots:[],guests:[]}),xe=()=>{ie.value.showPopup()},Le=p(()=>{x.value;const o=[...m.weekdaysShort()];return o.push(o.shift()),o}),Me=p(()=>(x.value,m.months())),L=p(()=>(x.value,e.use24hTimezone?"HH:mm":"hh:mm A")),re=p(()=>[{tag:"first_name",label:r("first_name"),active:!1,placeholder:r("first_name"),type:"text",required:!0},{placeholder:r("last_name"),type:"text",required:!0,tag:"last_name",label:r("last_name"),active:!1},{placeholder:r("phone"),type:"text",required:!0,tag:"phone",label:r("phone"),active:!1},{active:!1,type:"email",required:!0,placeholder:r("email"),tag:"email",label:r("email")},{label:"Button",tag:"button",type:"submit",placeholder:"Button"}]),Te=p(()=>{x.value;const a="Thank you for your appointment request. We will contact you shortly to confirm your request. Please call our office at ";return e.selectedCalendar&&(e.selectedCalendar.thanks_message||e.selectedCalendar.form_submit_thanks_message)?!(D.value!=="en"&&(e.selectedCalendar.thanks_message&&e.selectedCalendar.thanks_message.includes(a)||e.selectedCalendar.form_submit_thanks_message&&e.selectedCalendar.form_submit_thanks_message.includes(a))):!1}),q=p(()=>e.step<3);p(()=>e.selectedSlot?m().tz(e.selectedSlot,A.value).format():"NA");const Y=p(()=>{var a;return e.disableContactTimezone?A.value:(a=e.selectedTimezone)==null?void 0:a.value}),A=p(()=>{if(e.selectedCalendar.id&&e.allLocationData[e.selectedCalendar.id]&&e.allLocationData[e.selectedCalendar.id].timezone)return e.allLocationData[e.selectedCalendar.id].timezone});p(()=>m(e.appointmentDate).tz(Y.value));const qe=p(()=>(x.value,m(e.appointmentDate).format("ddd, ll"))),Ye=p(()=>e.filterTimezone?e.availableTimezones.filter(a=>a.label.toLowerCase().includes(e.filterTimezone.toLowerCase())):e.availableTimezones),Z=p(()=>qt(e.daySlots,m(e.appointmentDate).format("YYYY-MM-DD")+".slots",[]).map(o=>m(o).tz(Y.value))),R=p(()=>Z.value.filter(a=>a.hour()<12)),B=p(()=>Z.value.filter(a=>a.hour()>=12)),S=p(()=>Yt(e.allLocationData)?[]:Object.values(e.allLocationData).map(a=>a.calendar).sort((a,o)=>a.order-o.order)),g=p(()=>{var a,o;if(((a=e.selectedCalendar)==null?void 0:a.id)&&((o=e.allLocationData[e.selectedCalendar.id])==null?void 0:o.calendar))return e.allLocationData[e.selectedCalendar.id].calendar}),de=p(()=>{var a,o;if(((a=e.selectedCalendar)==null?void 0:a.id)&&((o=e.allLocationData[e.selectedCalendar.id])==null?void 0:o.email))return e.allLocationData[e.selectedCalendar.id].email}),ce=p(()=>{var a,o;if(((a=e.selectedCalendar)==null?void 0:a.id)&&((o=e.allLocationData[e.selectedCalendar.id])==null?void 0:o.phone))return e.allLocationData[e.selectedCalendar.id].phone}),Re=p(()=>{var a;return((a=e.selectedCalendar)==null?void 0:a.id)&&e.allLocationData[e.selectedCalendar.id]?e.allLocationData[e.selectedCalendar.id].country:"US"}),Be=p(()=>ce.value?ce.value:de.value?de.value:void 0),Q=p(()=>e.selectedCalendar?e.selectedCalendar.pixel_id:null),Ie=p(()=>e.event?m(e.event.start_time).tz(Y.value).format("ddd, ll"):null);O(()=>e.appointmentDate,a=>{a===void 0?e.events=[]:pe()}),O(()=>Z.value,a=>{e.selectedSlot=null});const G=p(()=>Array.isArray(e.recurringSlots)&&e.recurringSlots.length);O(()=>e.selectedSlot,a=>{var o,u;try{if(!!((o=e.selectedCalendar)!=null&&o.recurringRule)&&a){e.showRecurringSlots=!0;const n=new Date(a).getTime();He(n,(u=e.selectedTimezone)==null?void 0:u.value)}else e.showRecurringSlots=!1,e.recurringSlots=[]}catch(n){console.error(n),e.showRecurringSlots=!1,e.recurringSlots=[]}}),O(()=>e.selectedTimezone,()=>{e.timezoneChangeState&&J({reset:!0})}),O(()=>e.selectedCalendar,async a=>{if(a.availability_type==ye.STANDARD&&a.allow_booking_for_unit&&a.allow_booking_for){const o=m().tz(a.timezone).add(a.allow_booking_for,a.allow_booking_for_unit).endOf("day");e.calendarRange.to=m(o).tz(m.tz.guess(),!0).format("YYYY-M-D")}e.lang===void 0&&a.language&&D!==a.language&&a.language!=="en"&&(D.value=a.language,await _t(`unpkg.com/dayjs@1.8.21/locale/${D.value}.js`,()=>{m.locale(D.value),x.value=D.value})),e.use24hTimezone||(e.use24hTimezone=a.use24hFormat),e.startDayOfWeek=a.startDayOfWeek,a.availability_type==ye.STANDARD&&a.allow_booking_after_unit&&a.allow_booking_after_unit!=="hours"&&a.allow_booking_after&&(e.calendarRange.from=m().tz(a.timezone).add(a.allow_booking_after,a.allow_booking_after_unit).startOf("day").format("YYYY-M-D")),!H.funnelPreview&&Q.value!==void 0&&Q.value!==""&&ee(()=>{Lt(Q.value)}),e.disableContactTimezone=a.disableContactTimezone,J({reset:!0,setAppointmentDate:!0}),Ue()}),v.query.use24hFormat&&(e.use24hTimezone=!0),v.query.lang&&(e.lang=v.query.lang),e.allLocationData=H.calendarData,e.calendarId=v.params.id,e.popup=v.query.popup,e.eventId=v.query.event_id,lt(()=>{K()});function K(){const a=j.value;if(!!a){const o=parseInt(a.scrollHeight);window.parent.postMessage(["highlevel.setHeight",{height:o>500?o:560,id:"msgsndr-calendar"}],"*")}}it(async()=>{window.dayjs=m,Ee(),await Ve(),ee(()=>{if(e.selectedCalendar&&e.selectedCalendar.code_block){const a=document.createRange();a.setStart(document.head,0),document.body.appendChild(a.createContextualFragment(e.selectedCalendar.code_block))}Ke()}),setTimeout(()=>{K()},2e3)});function X(a,o,u){const n=a.scrollTop,f=o-n;let h=0;const w=20,b=function(y,ge,ve,Je){return y/=Je/2,y<1?ve/2*y*y+ge:(y--,-ve/2*(y*(y-2)-1)+ge)},U=function(){h+=w;const y=b(h,n,f,u);a.scrollTop=y,h<u&&setTimeout(U,w)};U()}function ue(a){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}function Oe(a){const{to:o,from:u}=e.calendarRange;return o&&new Date(ue(a))>new Date(o)||u&&new Date(ue(a))<new Date(u)?!0:e.availableTime.length>0?!e.availableTime.includes(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()):!0}function Pe(){const a=se.value;a&&X(a,a.offsetTop,500),(window.matchMedia("only screen and (max-width: 649px)").matches||a.closest(".hl-app-mobile"))&&(W.value.className+=" selected-date")}function Fe(){W.value.classList.remove("selected-date")}function me(a){let o=0;a==="am"?(e.AMVisibleSlot+6>=R.value.length?(o=(R.value.length-1)%5,e.AMVisibleSlot=-1):(o=5,e.AMVisibleSlot=e.AMVisibleSlot+5),o<5&&(o=0)):(e.PMVisibleSlot+6>=B.value.length?(o=(B.value.length-1)%5,e.PMVisibleSlot=-1):(o=5,e.PMVisibleSlot=e.PMVisibleSlot+5),o<5&&(o=0));const u=E.value["pick-hours--"+a];if(u){const n=o>0?parseFloat(u.scrollTop)+o*49:0;X(u,n,500)}}function pe(){he("am"),he("pm")}function he(a){const o=E.value["pick-hours--"+a];o&&X(o,0,500)}function Ee(){e.timezones.includes(e.timezone)||e.timezones.push(e.timezone),e.availableTimezones=Tt(e.timezones.map(a=>{const o=m().tz(a);return{label:`GMT${o.format("Z")} ${a} (${o.format("z")})`,sortFormat:o.format("z"),value:a,currentTime:o.format(L.value),utcOffset:o.utcOffset()}}),"utcOffset"),e.selectedTimezone=e.availableTimezones.find(a=>{const o=e.disableContactTimezone?A.value:e.timezone;return a.value===o})}async function Ve(){if(S.value.length===0){e.step=4,e.noCalendarError=!0;return}const a=S.value.findIndex(o=>{const u=v.query.calendar;return o.id===v.query.calendar&&u.split(",")[0]});a>-1?e.selectedCalendar=S.value[a]:e.selectedCalendar=S.value[0];try{if(e.selectedCalendar.enable_recurring){const{booking_option:o,booking_overlap_default_status:u,...n}=e.selectedCalendar.recurring,f={freq:n.freq,count:n.count,interval:n.interval||1,monthDays:n.month_days,weekDays:n.week_days},h=await be.generateRRuleText(f);e.selectedCalendar.recurringRule=(h[0].toUpperCase()+h.slice(1)).replace("time","occurrence")}}catch(o){console.error(o),e.selectedCalendar.recurringRule="-"}e.disableContactTimezone=g.value.disableContactTimezone,e.selectedTimezone=e.availableTimezones.find(o=>e.disableContactTimezone?o.value===A.value:o.value===e.timezone),$e()}function Ae(){const a={},o=re.value;return a.form=[],e.selectedCalendar.stripe&&o.splice(re.value.length-1,0,{tag:"payment",label:r("payment"),active:!1,placeholder:"",type:"payment",required:!0}),a.form={width:"550",formLabelVisible:!0,fbPixelId:"",layout:!1,customStyle:"",stickyContact:!!e.selectedCalendar.sticky_contact,fields:o,align:"center"},a.country=Re.value,a.locationId=e.selectedCalendar.location_id,a}async function Ue(){var a;if(e.selectedCalendar&&e.selectedCalendar.form_id){const o=z.newBaseURL+"/form/"+e.selectedCalendar.form_id,u=await $fetch(o),n=(a=u==null?void 0:u.form)==null?void 0:a.fields;n&&n.length>0&&(n[n.length-1],u.form.button={background:"#188bf6",color:"#fff",border:{border:0,padding:15,radius:4}},e.selectedCalendar.stripe&&n.push({tag:"payment",label:"Payment",active:!1,placeholder:"",type:"payment",required:!0})),e.formData=u}e.selectedCalendar&&!e.selectedCalendar.form_id&&(e.formData=Ae())}function fe({month:a,year:o}){e.calendarStartingDate=`${o}-${a+1}-1`,J({reset:!1})}async function J({reset:a=!1,setAppointmentDate:o=!1}){e.AMVisibleSlot=-1,e.PMVisibleSlot=-1,pe(),e.isLoading=!0,e.events=[],a&&(e.daySlots={}),e.showNoDates=!1,e.seqCall++;const u=m(e.calendarStartingDate,"YYYY-M-D"),n=u.clone().startOf("month"),f=u.clone().endOf("month"),h=await $fetch(z.newBaseURL+"/appointment/free-slots",{params:{calendar_id:e.selectedCalendar.id,startDate:n.valueOf(),endDate:f.valueOf(),timezone:Y.value}});e.daySlots={...e.daySlots,...h},e.availableTime=Object.keys(h).map(b=>m(b).format("YYYY-M-D"));const w=Object.keys(h).filter(b=>b!=="traceId");o&&w.length>0?m(w[0],"YYYY-M-D").isSame(m(e.calendarStartingDate,"YYYY-M-D"),"month")&&(e.appointmentDate=Object.keys(h)[0]):w.length===0&&(e.showNoDates=!0),e.isLoading=!1,e.timezoneChangeState=!0}async function $e(){if(!!e.eventId)try{const a=await $fetch(z.baseUrl+"/appointment/"+e.eventId);a?e.event=a:e.noEventFound=!0}catch{e.noEventFound=!0}}const Ne=p(()=>G.value&&e.recurringSlots.filter(a=>!a.isUnavailable).length);async function He(a,o){e.loadingRecurringSlots=!0;const u=await be.getRecurringSlots(e.selectedCalendar.id,{selectedSlot:a,timezone:o});e.recurringSlots=u.map(n=>{const f=m(n.slot).format("ddd, ll"),h=m(n.slot).tz(o),w=h.format(L.value);let b=m(h.format("YYYY-MM-DDTHH:mm"),o);b=b.add(e.selectedCalendar.slot_duration,"m");const U=b.format(L.value);return{text:`${f} [ ${w} - ${U} ]`,isUnavailable:n.status!=="AVAILABLE"}}),e.loadingRecurringSlots=!1}function I(){const a=ne.value;e.step===1&&e.selectedSlot?(e.step++,a&&a.querySelector("input").setAttribute("autofocus","true")):e.step===2||e.step++,setTimeout(()=>{K()},100)}function je(a){e.disableBackBtn=a.disable}function We(a){ee(()=>{Mt("track","Schedule",(a==null?void 0:a.fbEventId)||"")});const o=v.query.redirect||void 0;if(window.parent.postMessage(["msgsndr-booking-complete",{fingerprint:a.fingerprint,calendarId:g.value.id}],"*"),o==="false"||o===!1||H.redirect===!1){ze("on-submit",a);return}if(a&&a.calendarThankYouUrl){const u=gt(e.selectedCalendar.location_id);window.top.location.href=vt(a.calendarThankYouUrl,u);return}(e.selectedCalendar.form_submit_thanks_message||e.selectedCalendar.thanks_message)&&(e.thanksMsg=bt(e.selectedCalendar.form_submit_thanks_message||e.selectedCalendar.thanks_message,a.cookiePayload)),G.value?e.appointmentIds=[...a.ids]:e.appointmentIds=[a.id],e.creatingAppointment=!1,e.step++}function Ze(a){e.serverError=a.error}async function Qe(){if(e.step++,e.notes){e.isLoading=!0;const a={notes:e.notes};await Promise.all(e.appointmentIds.map(async o=>{const u=z.baseUrl+"/appointment/"+o+"/note";await $fetch(u,{method:"POST",body:a})})),e.isLoading=!1}}function _e(){window.self!==window.top&&parent.postMessage(["highlevel.closeWindow"],"*");const a=j.value;a&&yt(a,30)}function Ge(a){e.isNextMonthDisabled=a}function Ke(){{let a=le.value;a.clientWidth<650&&window.innerWidth>650?a.classList.add("hl-app-mobile"):a.classList.contains("hl-app-mobile")&&a.classList.remove("hl-app-mobile")}}const Xe=p(()=>{var a,o;return((a=g.value)==null?void 0:a.stripe)&&Object((o=g.value)==null?void 0:o.stripe).hasOwnProperty("amount")});return ht(()=>{if(Xe)return{script:[{src:"https://js.stripe.com/v3/",async:!0,type:"text/javascript"}]}}),(a,o)=>{const u=et;return l(),i("div",{class:"hl-app",ref_key:"calendarElementRef",ref:le},[s("div",Rt,[s("form",{onSubmit:P(I,["prevent"])},[s("div",{ref_key:"hlWidget",ref:j,class:te(["hl_widget",{"--small":!t(q),"white-bg":!t(e).popup},{popup:t(e).popup}]),id:t(q)?"hl_widget":"hl_widget-requested"},[s("div",{ref_key:"hlWidgetInner",ref:W,class:te([{"no-shadow ":!t(e).popup},"hl_widget-inner"])},[t(q)&&t(e).popup?(l(),i("div",Ot,[s("h2",null,[M(d(t(e).event?t(r)("reschedule_current_time",{time:t(Ie)}):t(r)("appointment_request_form"))+" ",1),t(g)?(l(),i("span",Pt,d(t(g).name),1)):(l(),T(F,{key:1,color:"#607179",size:"20px",style:{display:"inline-block","margin-bottom":"-2px","margin-left":"5px"}}))]),s("button",{onClick:_e,type:"button",class:"hl_widget-close"}," \xD7 ")])):t(e).popup&&t(e).step===3?(l(),i("div",Ft,[s("h2",null,d(t(r)("appointment_requested")),1),Et])):t(e).popup&&t(e).step===4?(l(),i("div",Vt,[s("h2",null,d(t(r)("thank_you")),1),At])):c("",!0),t(q)?(l(),i("div",{key:3,class:te(["hl_widget-body",{"step-form":t(e).step===2}])},[s("div",Ut,[!t(e).eventId||t(e).event&&t(e).event._id?(l(),i("div",$t,[t(g)&&t(g).widget_logo&&t(g).widget_logo.url?(l(),i("div",Nt,[s("img",{class:"appointment_widgets--classic-calendar-logo",src:t(g).widget_logo.url||"",style:rt(t(g).widget_logo.shape==="round"?{borderRadius:"50%"}:"")},null,12,Ht),jt])):(l(),i("div",Wt)),ke(s("div",Zt,[t(S).length>1?(l(),i("div",Qt)):c("",!0),s("div",Gt,[s("div",Kt,[s("h3",Xt,d(t(r)("pick_a_date_and_time")),1),t(S).length>1?(l(),i("div",Jt,[$(t(Se),{modelValue:t(e).selectedCalendar,"onUpdate:modelValue":o[0]||(o[0]=n=>t(e).selectedCalendar=n),options:t(S),allowEmpty:!1,"show-labels":!1,closeOnSelect:!0,label:"name",class:"multi_select_calendar"},{option:N(({option:n})=>[s("div",ea,[s("span",ta,d(n.name),1)])]),noResult:N(()=>[M(d(t(r)("no_calendar_found")),1)]),_:1},8,["modelValue","options"])])):c("",!0),s("div",aa,[t(e).appointmentDate?(l(),T(xt,{key:0,ref_key:"datePickerRef",ref:oe,modelValue:t(e).appointmentDate,"onUpdate:modelValue":[o[1]||(o[1]=n=>t(e).appointmentDate=n),Pe],format:"YYYY-MM-DD",displayFormat:"YYYY-MM-DD",hasInputElement:!1,isDateDisabled:Oe,disablePeriodControl:!0,calendarRange:t(e).calendarRange,onChangedMonth:fe,onChangedYear:fe,placeholder:t(r)("date_of_birth"),class:"date-picker-calendar",onDisableNextMonth:Ge,weekdays:t(Le),months:t(Me),startDayOfWeek:t(e).startDayOfWeek,nextMonthCaption:t(r)("next_month"),prevMonthCaption:t(r)("previous_month")},null,8,["modelValue","calendarRange","placeholder","weekdays","months","startDayOfWeek","nextMonthCaption","prevMonthCaption"])):c("",!0),!t(e).isLoading&&t(e).showNoDates?(l(),i("div",oa,[t(e).isNextMonthDisabled?c("",!0):(l(),i("a",{key:0,onClick:o[2]||(o[2]=n=>t(oe).incrementMonth())},[M(d(t(r)("go_to_next_month"))+" ",1),sa])),s("div",null,d(t(r)("no_slot_available_this_month")),1)])):c("",!0)]),s("div",na,[t(e).disableContactTimezone?c("",!0):(l(),T(t(Se),{key:0,modelValue:t(e).selectedTimezone,"onUpdate:modelValue":o[3]||(o[3]=n=>t(e).selectedTimezone=n),closeOnSelect:!0,allowEmpty:!1,"show-labels":!1,options:t(Ye),label:"label",placeholder:t(r)("timezone"),class:"multi_select_calendar"},{option:N(({option:n})=>[s("div",la,[s("span",ia,d(n.label),1),s("span",ra,d(n.currentTime),1)])]),noResult:N(()=>[M(d(t(r)("no_timezone_found")),1)]),_:1},8,["modelValue","options","placeholder"]))])]),s("div",{ref_key:"appointmentSlots",ref:se,id:"appointmentSlots",class:"hl_widget--pick-hours d_none"},[s("div",da,[s("div",{class:"pick-date-title"},[s("span",{onClick:Fe,class:"pr-3 back_button"},ua)]),s("h3",null,[M(d(t(r)("available_starting_times_for"))+" ",1),t(e).appointmentDate?(l(),i("strong",ma,d(t(qe)),1)):c("",!0),t(e).loadingRecurringSlots?(l(),T(F,{key:1,loading:!0,color:"#178AF6",size:"25px"})):t(G)?(l(),i("div",{key:2,onClick:P(xe,["stop","prevent"])},[s("div",ha,[s("span",fa," +"+d(t(Ne)-1)+" more ",1)]),$(St,{ref_key:"recurringModalRef",ref:ie,recurringSlots:t(e).recurringSlots,recurrenceCount:t(e).selectedCalendar.recurring.count},null,8,["recurringSlots","recurrenceCount"])],8,pa)):c("",!0)])]),t(e).isLoading?(l(),i("div",_a,[$(F,{loading:!0,color:"#188bf6",size:"30px"})])):c("",!0),t(e).isLoading?c("",!0):(l(),i("div",ga,[s("div",va,[s("h4",null,d(t(r)("am")),1),t(R).length?c("",!0):(l(),i("p",ba,d(t(r)("no_slots_available")),1)),s("div",{id:"pick-hours--am",ref:n=>t(E)["pick-hours--am"]=n},[(l(!0),i(Ce,null,we(t(R),(n,f)=>(l(),i("div",{id:"am"+f,key:f,class:"hour-select"},[s("input",{value:n.valueOf(),id:n.format("HH:mm"),checked:t(e).selectedSlot&&t(e).selectedSlot.valueOf()===n.valueOf(),type:"radio",name:"hour-select"},null,8,ka),s("label",{for:n.format("HH:mm"),onClick:h=>t(e).selectedSlot=n,textContent:d(n.format(t(L)))},null,8,Ca),!t(e).isLoading&&t(e).step===1?(l(),i("button",{key:0,onClick:P(I,["prevent"]),type:"button",disabled:t(e).loadingRecurringSlots,class:"hl_select_button --primary"},d(t(e).loadingRecurringSlots?t(r)("fetching_recurring_slots"):t(r)("select_time")),9,wa)):c("",!0)],8,ya))),128))],512),t(R).length>5?(l(),i("a",{key:1,onClick:o[4]||(o[4]=n=>me("am")),href:"javascript: void(0)",class:"load-more"},d(t(r)("load_more")),1)):c("",!0)]),s("div",Sa,[s("h4",null,d(t(r)("pm")),1),t(B).length?(l(),i("div",{key:1,id:"pick-hours--pm",ref:n=>t(E)["pick-hours--pm"]=n},[(l(!0),i(Ce,null,we(t(B),(n,f)=>(l(),i("div",{key:f,id:"pm"+f,class:"hour-select"},[s("input",{value:n.valueOf(),id:n.format("HH:mm"),checked:t(e).selectedSlot&&t(e).selectedSlot.valueOf()===n.valueOf(),type:"radio",name:"hour-select"},null,8,xa),s("label",{for:n.format("HH:mm"),textContent:d(n.format(t(L))),onClick:h=>t(e).selectedSlot=n},null,8,La),!t(e).isLoading&&t(e).step===1?(l(),i("button",{key:0,onClick:P(I,["prevent"]),type:"button",class:"hl_select_button --primary"},d(t(r)("select_time")),9,Ma)):c("",!0)],8,za))),128))],512)):(l(),i("p",Da,d(t(r)("no_slots_available")),1)),t(B).length>5?(l(),i("a",{key:2,onClick:o[5]||(o[5]=n=>me("pm")),href:"javascript: void(0)",class:"load-more"},d(t(r)("load_more")),1)):c("",!0)])]))],512)])],512),[[dt,t(e).step===1]]),t(e).step===2?(l(),i("div",{key:2,id:"form-builder",ref_key:"formBuilderRef",ref:ne,class:"form-builder--wrap"},[t(e).serverError?(l(),i("div",Ta,[s("span",qa,d(t(e).serverError),1)])):c("",!0),s("div",Ya,[t(e).disableBackBtn?c("",!0):(l(),i("span",{key:0,onClick:o[6]||(o[6]=n=>t(e).step=1),class:"btn-back pl-0 pr-3"},Ba)),t(e).disableBackBtn?(l(),i("span",Ia,Pa)):c("",!0),s("div",null,[t(e).selectedSlot?(l(),i("span",Fa,[Ea,s("span",Va,d(t(e).selectedSlot.format(t(L)))+" ("+d(t(e).selectedTimezone.sortFormat)+") ",1),M(" - "),t(e).selectedCalendar&&t(e).selectedCalendar.slot_duration?(l(),i("span",Aa,d(t(e).selectedCalendar.slot_duration%60===0?t(e).selectedCalendar.slot_duration/60+" "+t(r)("hr"):t(e).selectedCalendar.slot_duration+" "+t(r)("minutes")),1)):c("",!0)])):c("",!0),t(e).selectedSlot?(l(),i("span",Ua,[$a,s("span",Na,d(t(e).selectedSlot.format("ddd, ll")),1)])):c("",!0)])]),t(e).formData?(l(),T(u,{key:1,timezone:t(Y),formId:t(e).selectedCalendar.form_id,formElementClass:_.calendarElementClass,formData:t(e).formData,calendar:t(g),selectedSlot:t(e).selectedSlot,event:t(e).event,pageUrl:_.pageUrl,urlParams:_.urlParams,baseReferrrer:_.baseReferrrer,guests:t(e).guests,stickyContactData:_.stickyContactData,stickyContactFingerprint:_.stickyContactFingerprint,onStep:We,onProcessError:Ze,onDisableBackOnSubmit:je,class:"hl_widget-step2",funnelPreview:_.funnelPreview},null,8,["timezone","formId","formElementClass","formData","calendar","selectedSlot","event","pageUrl","urlParams","baseReferrrer","guests","stickyContactData","stickyContactFingerprint","funnelPreview"])):c("",!0)],512)):c("",!0)])):c("",!0),t(e).noEventFound?(l(),i("div",Ha,d(t(r)("no_calendar_event_found")),1)):c("",!0)])],2)):t(e).step===3?(l(),i("div",ja,[t(Te)?(l(),i("p",{key:0,textContent:d(t(e).thanksMsg||t(e).selectedCalendar.form_submit_thanks_message||t(e).selectedCalendar.thanks_message)},null,8,Wa)):(l(),i("p",Za,d(t(r)("thank_you_for_your_appointment_request"))+" "+d(t(r)("contact_you_shortly_with_contact_method",{contactMethod:t(Be)})),1)),s("div",Qa,[s("label",null,d(t(r)("additional_information")),1),ke(s("textarea",{"onUpdate:modelValue":o[7]||(o[7]=n=>t(e).notes=n),class:"form-control",rows:"5",placeholder:t(r)("anything_youd_like_to_know_before_appointment")},null,8,Ga),[[ct,t(e).notes]])])])):t(e).noCalendarError?(l(),i("div",Ka,[s("p",null,d(t(r)("cannot_find_calendar")),1)])):(l(),i("div",Xa,[t(e).appointmentIds&&t(e).appointmentIds.length?(l(),i("div",Ja,[s("a",{href:t(ae)+`/google/calendar/add-event/${t(e).appointmentIds[0]}`,class:"calendar-button",target:"_blank"},[(l(),i("svg",to,oo)),s("span",so,d(t(r)("add_to_google_calendar")),1)],8,eo),s("a",{href:t(ae)+`/google/calendar/get-ics/${t(e).appointmentIds[0]}`,class:"calendar-button",target:"_blank"},[(l(),i("svg",lo,ro)),s("span",co,d(t(r)("add_to_outlook_ical")),1)],8,no)])):c("",!0)])),t(q)&&(!t(e).eventId||t(e).event&&t(e).event._id)?(l(),i("div",uo,[t(e).isLoading&&t(e).step==2?(l(),i("div",mo,[$(F,{loading:!0,color:"#188bf6",size:"30px"})])):c("",!0),!t(e).isLoading&&t(e).popup?(l(),i("button",{key:1,onClick:_e,type:"button",class:"hl_button hl_button-cancel"},d(t(r)("cancel")),1)):c("",!0),!t(e).isLoading&&t(e).step===1?(l(),i("button",{key:2,onClick:P(I,["prevent"]),disabled:!t(e).selectedSlot||t(e).isLoading||t(e).loadingRecurringSlots,class:"hl_button --primary --first-step",type:"button"},d(t(e).loadingRecurringSlots?t(r)("fetching_recurring_slots"):t(r)("select_date")),9,po)):c("",!0)])):t(e).step===3?(l(),i("div",ho,[t(e).isLoading?c("",!0):(l(),i("button",{key:0,onClick:I,type:"button",class:"hl_button mr-2"},d(t(r)("skip")),1)),t(e).isLoading?c("",!0):(l(),i("button",{key:1,disabled:!t(e).notes,onClick:Qe,type:"button",class:"hl_button --primary"},d(t(r)("submit")),9,fo)),t(e).isLoading?(l(),T(F,{key:2,loading:!0,color:"#188bf6",size:"30px"})):c("",!0)])):c("",!0)],2)],10,It)],40,Bt)],512)],512)}}});const Eo=pt(_o,[["__scopeId","data-v-a6d7a654"]]);export{Eo as default};
