import{F as et,p as Ot,G as Ye,H as Ft,I as xt,j as Ke,J as Qe,K as $t,L as Ct,M as Be,N as Et,m as Lt}from"./helpers.9a9d5058.js";import{c as we}from"./Countries.69e07731.js";import{r as T,g as C,d as I,K as ce,o as ke,C as Tt,c as u,h,j as k,i as U,m as Ee,Y as je,f as D,s as Re,a as o,b as V,t as E,w as H,a0 as Xe,F as te,l as ie,D as A,n as Le,u as Dt,a1 as Mt,V as W,v as ge,X as oe,e as ee,a2 as J,a3 as Q,a4 as Pt,a5 as tt,k as At,B as it,a6 as qt}from"./entry.ccfebbe1.js";import{b as jt,_ as He,a as Ut,F as nt}from"./FunnelServices.6e08424a.js";import{e as Ge}from"./utils.c7339651.js";import{v as Bt}from"./v4.9a3e6124.js";import{_ as Rt}from"./Recaptcha.vue_vue_type_script_setup_true_lang.e4363a08.js";import{u as at}from"./composables.6e31dd6d.js";import{l as lt,i as rt}from"./IntlTel.7d5c59dd.js";import{V as st,o as ot}from"./optimize_script.3eba72ba.js";const Fl=async(e,i,n,t,r,a)=>{const l=T(n),c=T(t),m=T(r),f=T(a);let s=e||i.query;const d=et.map(y=>{var w;if(y in s)if(y==="phone"&&s[y]){let b=s[y];s[y][0]===" "&&(b=b.split(""),b[0]="+",b=b.join("")),l.value.phone=b}else y==="country"&&s[y]&&we.hasOwnProperty(s[y])?c.value=we[s[y]]:m.value[y]=(w=s[y])==null?void 0:w.replace(/\+/g," ")});await Promise.all(d);let v=[];const p=await Promise.all(f.value.map(y=>{y.hiddenFieldQueryKey&&v.push(y)}));await Promise.all(p);const x=v.map(y=>{var w,b,$;if(y.hiddenFieldQueryKey in s)if(y.type==="phone"&&s[y.hiddenFieldQueryKey]){let L=s[y.hiddenFieldQueryKey];s[y.hiddenFieldQueryKey][0]===" "&&(L=L.split(""),L[0]="+",L=L.join("")),l.value[y.tag]=L}else if(y.type==="checkbox")if(s[y.hiddenFieldQueryKey].includes(",")){let L=s[y.hiddenFieldQueryKey].split(",");m.value[y.tag]=L.map(z=>z==null?void 0:z.trim())}else m.value[y.tag]=[s[y.hiddenFieldQueryKey]];else y.type==="email"?m.value[y.tag]=(w=s[y.hiddenFieldQueryKey])==null?void 0:w.replace(/ /g,"+"):m.value[y.tag]=(b=s[y.hiddenFieldQueryKey])==null?void 0:b.replace(/\+/g," ");else if(y.type==="phone"&&y.hiddenFieldValue){let L=y.hiddenFieldValue;y.hiddenFieldValue[0]===" "&&(L=L.split(""),L[0]="+",L=L.join("")),l.value[y.tag]=L}else y.hiddenFieldValue&&(m.value[y.tag]=($=y.hiddenFieldValue)==null?void 0:$.replace(/\+/g," "))});return await Promise.all(x),console.log("formFieldsValue after fillDataForStandardFieldUri",m.value),{phoneCountryIncluded:l.value,formattedCountry:c.value,formFieldsValue:m.value,formFields:f.value}},xl=async(e,i,n,t,r,a)=>{const l=T(t),c=T(r),m=T(a),f=e||Ot(i);if(!f)return;const s=et.map(d=>{if(n.includes(d))if(d==="phone"){let v=f[d];v&&v[0]===" "&&(v=v.split(""),v[0]="+",v=v.join("")),c.value.phone=v}else d==="country"&&f[d]?m.value=we[f[d]]:d==="address"&&!f[d]&&f.address1?l.value[d]=f.address1:l.value[d]=f[d]});return await Promise.all(s),{formFieldsValue:l.value,formattedCountry:m.value,phoneCountryIncluded:c.value}},$l=(e,i)=>{const n=T(e),t=T(i);return t.value&&(n.value.country=Object.keys(we).find(r=>we[r]===t.value)),{formFieldsValue:n.value}},Cl=async(e,i,n)=>{const t=e.query,r=T(n),a=i.map(l=>{l.hidden&&l.type!="source"&&(!l.hiddenFieldQueryKey||!(l.hiddenFieldQueryKey in t))&&(r.value[l.tag]=r.value[l.tag]||l.hiddenFieldValue)});return await Promise.all(a),{formFieldsValue:r.value}},El=e=>{let i=0;return Object.keys(e).forEach(n=>{if(e[n]instanceof File)i+=e[n].size;else if(e[n]&&e[n].hasOwnProperty("files")){let t=e[n].files.length;for(let r=0;r<t;r++)i+=e[n].files[r].size}}),i},Ll=e=>{var t,r,a;const i=T([]);let n=((t=e==null?void 0:e.form)==null?void 0:t.fields)||[];return(r=e[0])!=null&&r.slideData&&(n=(a=e[0])==null?void 0:a.slideData),n.map(l=>{const c=(l==null?void 0:l.font)||(l==null?void 0:l.fontFamily)||"roboto";Object.keys(Ye).includes(c)&&i.value.push({href:Ye[c],rel:"stylesheet"})}),i.value},Tl=()=>{const e=T({}),i=()=>{var a,l,c,m,f,s,d,v,p,x,y,F,w,b,$,L,z,G,M,q,Y,Z,N,X;return{backgroundColor:"#"+((a=e.value)==null?void 0:a.bgColor),color:"#"+((l=e.value)==null?void 0:l.color),border:((c=e.value)==null?void 0:c.border)+"px "+((m=e.value)==null?void 0:m.borderStyle)+" #"+e.value.borderColor,borderRadius:e.value.radius+"px",maxWidth:e.value.width+"px",width:"100%",marginTop:e.value.marginTop?(f=e.value)==null?void 0:f.marginTop:"",borderColor:"#"+((s=e.value)==null?void 0:s.borderColor),paddingTop:parseFloat((v=(d=e.value)==null?void 0:d.padding)==null?void 0:v.top)+"px",paddingBottom:parseFloat((x=(p=e.value)==null?void 0:p.padding)==null?void 0:x.bottom)+"px",paddingLeft:parseFloat(((F=(y=e.value)==null?void 0:y.padding)==null?void 0:F.left)||15)+"px",paddingRight:parseFloat(((b=(w=e.value)==null?void 0:w.padding)==null?void 0:b.right)||15)+"px",boxShadow:((L=($=e.value)==null?void 0:$.shadow)==null?void 0:L.horizontal)+"px "+((G=(z=e.value)==null?void 0:z.shadow)==null?void 0:G.vertical)+"px "+((q=(M=e.value)==null?void 0:M.shadow)==null?void 0:q.blur)+"px "+((Z=(Y=e.value)==null?void 0:Y.shadow)==null?void 0:Z.spread)+"px #"+((X=(N=e.value)==null?void 0:N.shadow)==null?void 0:X.color)}},n=()=>{var a,l,c,m,f,s,d,v,p,x,y,F,w,b,$,L,z,G,M,q,Y,Z,N,X,ae,Ve,Se,he;return{backgroundColor:"#"+((a=e.value)==null?void 0:a.bgColor),color:"#"+((l=e.value)==null?void 0:l.color),border:((c=e.value)==null?void 0:c.border)+"px "+((m=e.value)==null?void 0:m.borderStyle)+" #"+((f=e.value)==null?void 0:f.borderColor),borderRadius:((s=e.value)==null?void 0:s.radius)+"px",maxWidth:((d=e.value)==null?void 0:d.width)+"px",width:"100%",marginTop:(v=e.value)!=null&&v.marginTop?(p=e.value)==null?void 0:p.marginTop:"",borderColor:"#"+((x=e.value)==null?void 0:x.borderColor),paddingTop:parseFloat(((F=(y=e.value)==null?void 0:y.padding)==null?void 0:F.top)||0)+21+"px",paddingBottom:((b=(w=e.value)==null?void 0:w.padding)==null?void 0:b.bottom)+"px",paddingLeft:(((L=($=e.value)==null?void 0:$.padding)==null?void 0:L.left)||30)+"px",paddingRight:(((G=(z=e.value)==null?void 0:z.padding)==null?void 0:G.right)||30)+"px",boxShadow:((q=(M=e.value)==null?void 0:M.shadow)==null?void 0:q.horizontal)+"px "+((Z=(Y=e.value)==null?void 0:Y.shadow)==null?void 0:Z.vertical)+"px "+((X=(N=e.value)==null?void 0:N.shadow)==null?void 0:X.blur)+"px "+((Ve=(ae=e.value)==null?void 0:ae.shadow)==null?void 0:Ve.spread)+"px #"+((he=(Se=e.value)==null?void 0:Se.shadow)==null?void 0:he.color)}},t=(a,l)=>{var c,m,f,s;e.value={bgColor:a==null?void 0:a.background,border:(c=a==null?void 0:a.border)==null?void 0:c.border,borderStyle:(m=a==null?void 0:a.border)==null?void 0:m.style,borderColor:(f=a==null?void 0:a.border)==null?void 0:f.color,radius:(s=a==null?void 0:a.border)==null?void 0:s.radius,width:l,padding:(a==null?void 0:a.padding)||Ft,shadow:(a==null?void 0:a.shadow)||xt,marginTop:a==null?void 0:a.marginTop}};return{getFormWidth:C(()=>{var a;return((a=e==null?void 0:e.value)==null?void 0:a.width)||550}),getFormStyle:i,setFormStyle:t,getSurveyStyle:n}};const Ht=["readonly","value","placeholder","data-q","data-required"],It={class:"vdpInnerWrap"},Nt={class:"vdpHeader"},Wt={key:0},zt=["title","disabled"],Yt={width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Kt=["stroke"],Qt=["fill"],Xt=["title","disabled"],Gt={width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zt=["stroke"],Jt=["fill"],_t=["title","disabled"],ei=["title","disabled"],ti={class:"vdpPeriodControls"},ii={class:"vdpPeriodControl"},ni=["value"],ai={class:"vdpPeriodControl"},li=["value"],ri={class:"vdpTable"},si={class:"vdpHeadCellContent text-capitalize"},oi=["data-id"],di=["onClick"],ui={key:0,class:"vdpTimeControls"},ci={class:"vdpTimeCaption"},hi={class:"vdpTimeUnit"},mi=V("br",null,null,-1),fi=["value"],vi={key:0,class:"vdpTimeSeparator"},gi={key:1,class:"vdpTimeUnit"},yi=V("br",null,null,-1),pi=["value"],bi={key:2,class:"vdpTimeSeparator"},wi={key:3,class:"vdpTimeUnit"},ki=V("br",null,null,-1),Vi=["value"],Si=I({__name:"DatePick",props:{modelValue:{type:String,default:""},format:{type:String,default:"YYYY-MM-DD"},displayFormat:{type:String},editable:{type:Boolean,default:!0},hasInputElement:{type:Boolean,default:!0},inputAttributes:{type:Object},selectableYearRange:{type:Number,default:40},parseDate:{type:Function},formatDate:{type:Function},pickTime:{type:Boolean,default:!1},pickMinutes:{type:Boolean,default:!0},pickSeconds:{type:Boolean,default:!1},isDateDisabled:{type:Function,default:()=>!1},nextMonthCaption:{type:String,default:"Next month"},prevMonthCaption:{type:String,default:"Previous month"},setTimeCaption:{type:String,default:"Set time:"},mobileBreakpointWidth:{type:Number,default:500},disablePeriodControl:{type:Boolean,default:!1},joinNextPreviousArrow:{type:Boolean,default:!1},calendarRange:{type:Object,default:()=>({from:"",to:""})},weekdays:{type:Array,default:()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},months:{type:Array,default:()=>["January","February","March","April","May","June","July","August","September","October","November","December"]},startDayOfWeek:{type:[String,Number],default:"1"},startWeekOnSunday:{type:Boolean,default:!1},placeholder:{type:String,default:""},allowFutureDate:{type:Boolean,default:!0},dataQ:{type:String,required:!1},dataRequired:{type:Boolean,required:!1}},emits:["disableNextMonth","changedMonth","changedYear","update:modelValue"],setup(e,{expose:i,emit:n}){const t=e,r=/,|\.|-| |:|\/|\\/,a=/D+/,l=/M+/,c=/Y+/,m=/h+/i,f=/m+/,s=/s+/,d=(g,S)=>typeof g<"u"?g.toString().length>S?g:new Array(S-g.toString().length+1).join("0")+g:void 0,v=(g,S)=>{const O=[];for(;g.length;)O.push(g.splice(0,S));return O},p=(g,S)=>g.getDate()===S.getDate()&&g.getMonth()===S.getMonth()&&g.getFullYear()===S.getFullYear(),x=(g,S)=>{let O,j,P,se,ue,$e;g instanceof Array&&(g==null?void 0:g.length)>0&&(g=typeof g[0]===String?g[0]:"");const B=g.split(r),_=S.split(r),kt=_.length;for(let K=0;K<kt;K++)_[K].match(a)?O=parseInt(B[K],10):_[K].match(l)?j=parseInt(B[K],10):_[K].match(c)?P=parseInt(B[K],10):_[K].match(m)?se=parseInt(B[K],10):_[K].match(f)?ue=parseInt(B[K],10):_[K].match(s)&&($e=parseInt(B[K],10));const Vt=new Date([d(P,4),d(j,2),d(O,2)].join("-"));if(!isNaN(Vt)){const K=new Date(P,j-1,O);return[[P,"setFullYear"],[se,"setHours"],[ue,"setMinutes"],[$e,"setSeconds"]].forEach(([ze,St])=>{typeof ze<"u"&&K[St](ze)}),K}},y=(g,S)=>g?t.parseDate?t.parseDate(g,S):x(g,S):void 0,F=(g,S)=>{const O=y(g,S)||new Date;return{month:O.getMonth(),year:O.getFullYear()}},w=g=>{if(!g)return!1;const{year:S,month:O}=F(g,t.format);return`${R.value.year}-${R.value.month}`==`${S}-${O}`},b=(g,S)=>S.replace(c,O=>g.getFullYear()).replace(l,O=>d(g.getMonth()+1,O.length)).replace(a,O=>d(g.getDate(),O.length)).replace(m,O=>d(g.getHours(),O.length)).replace(f,O=>d(g.getMinutes(),O.length)).replace(s,O=>d(g.getSeconds(),O.length)),$=(g=1)=>{const S=new Date(R.value.year,R.value.month),O=new Date(S.getFullYear(),S.getMonth()+g);R.value={month:O.getMonth(),year:O.getFullYear()}},L=g=>{const S=y(g,t.displayFormat||t.format);Fe.value=g,n("update:modelValue",S?Oe(S,t.format):g)},z=()=>{pe.value||(pe.value=!0,R.value=F(t.modelValue,t.format),q(),N()),ye.value=void 0},G=()=>{pe.value&&(pe.value=!1,ye.value=void 0,Z(),ae())},M=g=>{t.hasInputElement&&g.target===xe.value&&G()},q=()=>{fe.value||(fe.value=S=>Y(S),["click","keyup","focusin"].forEach(S=>{document.addEventListener(S,fe.value)}))},Y=g=>{if(!be.value){G();return}g.keyCode?g.keyCode===27&&G():g.target!==be.value&&!be.value.contains(g.target)&&G()},Z=()=>{fe.value&&(["click","keyup","focusin"].forEach(g=>document.removeEventListener(g,fe.value)),fe.value=null)},N=()=>{me.value||(me.value=()=>X(),document.addEventListener("resize",me.value)),X()},X=()=>{const g=be.value.getBoundingClientRect();let S="vdpPositionTop",O="vdpPositionLeft";const j=()=>{const P=xe.value.getBoundingClientRect(),se=P.height,ue=P.width;window.innerWidth>t.mobileBreakpointWidth&&(g.top+g.height+se>window.innerHeight&&g.top-se>0&&(S="vdpPositionBottom"),g.left+ue>window.innerWidth&&(O="vdpPositionRight"),Me.value=["vdpPositionReady",S,O].join(" "))};xe.value?j():Re(j)},ae=()=>{me.value&&(Me.value=void 0,document.removeEventListener("resize",me.value),me.value=null)},Ve=()=>{n("update:modelValue","")},Se=g=>{if(!g.disabled){const S=new Date(g.date);le.value&&(S.setHours(le.value.hours),S.setMinutes(le.value.minutes),S.setSeconds(le.value.seconds)),n("update:modelValue",Oe(S,t.format)),t.hasInputElement&&!t.pickTime&&G()}},he=(g,S)=>{const O=ve.value,j={setHours:23,setMinutes:59,setSeconds:59};let P=parseInt(S.target.value,10)||0;P>j[g]?P=j[g]:P<0&&(P=0),S.target.value=d(P,g==="setHours"?1:2),O[g](P),n("update:modelValue",Oe(O,t.format))},Oe=(g,S)=>g?t.formatDate?t.formatDate(g,S):b(g,S):"",We=g=>t.displayFormat&&Oe(y(g,t.format),t.displayFormat)||g,ft=We(t.modelValue),vt=F(t.modelValue,t.format),Fe=T(ft),R=T(vt),ye=T(),Me=T(),pe=T(!t.hasInputElement),re=T(!1),de=T(!1),me=T(),fe=T(),xe=T(),be=T(),ve=C(()=>{const g=t.modelValue,S=t.format;return g?y(g,S):void 0}),gt=C(()=>!t.editable||t.inputAttributes&&t.inputAttributes.readonly),yt=C(()=>(ve.value,t.modelValue?Boolean(ve.value):!0)),pt=C(()=>{const{year:g,month:S}=R.value,O=[],j=new Date(g,S,1),P=new Date,se=t.startDayOfWeek==0?1:t.startDayOfWeek==1?0:2,ue=j.getDay()||7;if(ue>1-se)for(let B=ue-(2-se);B>=0;B--){const _=new Date(j);_.setDate(-B),O.push({outOfRange:!0,date:_})}for(;j.getMonth()===S;)O.push({date:new Date(j)}),j.setDate(j.getDate()+1);const $e=7-O.length%7;for(let B=1;B<=$e;B++){const _=new Date(j);_.setDate(B),O.push({outOfRange:!0,date:_})}return O.forEach(B=>{B.disabled=t.isDateDisabled(B.date),B.today=p(B.date,P),B.dateKey=[B.date.getFullYear(),B.date.getMonth()+1,B.date.getDate()].join("-"),B.selected=ve.value?p(B.date,ve.value):!1}),v(O,7)}),bt=C(()=>{const g=[];let S=R.value.year,O=S-t.selectableYearRange,j=S+t.selectableYearRange;t.allowFutureDate||(S=new Date().getFullYear(),O-=50,j=S);for(let P=O;P<=j;P++)g.push(P);return g}),le=C(()=>{const g=ve.value;return g?{hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),hoursPadded:d(g.getHours(),1),minutesPadded:d(g.getMinutes(),2),secondsPadded:d(g.getSeconds(),2)}:void 0}),Pe=C(()=>ye.value?`vdp${ye.value}Direction`:void 0),wt=C(()=>{if(t.startDayOfWeek==0){const g=t.weekdays.slice();return g.unshift(g.pop()),g}else if(t.startDayOfWeek==6){const g=t.weekdays.slice();return g.unshift(g.pop()),g.unshift(g.pop()),g}else return t.weekdays});return ce(()=>t.modelValue,g=>{yt.value&&(Fe.value=We(g),R.value=F(g,t.format))}),ce(R,(g,S)=>{const O=new Date(g.year,g.month).getTime(),j=new Date(S.year,S.month).getTime();ye.value=O!==j?O>j?"Next":"Prev":void 0,de.value=w(t.calendarRange.from),re.value=w(t.calendarRange.to),n("disableNextMonth",re.value)}),ce(()=>R.value.month,()=>{n("changedMonth",R.value)}),ce(()=>R.value.year,()=>{n("changedYear",R.value)}),ke(()=>{de.value=w(t.calendarRange.from),re.value=w(t.calendarRange.to),n("disableNextMonth",re.value)}),Tt(()=>{Z(),ae()}),i({incrementMonth:$}),(g,S)=>(o(),u("div",{ref:O=>be.value=O,class:D([{vdpWithInput:e.hasInputElement},"vdpComponent"])},[e.hasInputElement?(o(),u("input",{key:0,onKeypress:S[0]||(S[0]=O=>O.preventDefault()),readonly:h(gt),value:h(Fe),placeholder:e.placeholder,onInput:S[1]||(S[1]=O=>e.editable&&L(O.target.value)),onFocus:S[2]||(S[2]=O=>e.editable&&z()),onClick:S[3]||(S[3]=O=>e.editable&&z()),type:"text","data-q":e.dataQ,"data-required":e.dataRequired},null,40,Ht)):k("",!0),e.editable&&e.hasInputElement&&h(Fe)?(o(),u("button",{key:1,onClick:Ve,class:"vdpClearInput",type:"button"})):k("",!0),U(je,{name:"vdp-toggle-calendar"},{default:Ee(()=>[h(pe)?(o(),u("div",{key:0,ref:O=>xe.value=O,"on:click":M,class:D([[h(Me),{vdpFloating:e.hasInputElement}],"vdpOuterWrap"])},[V("div",It,[V("header",Nt,[e.joinNextPreviousArrow?(o(),u("div",Wt,[V("button",{title:e.prevMonthCaption,onClick:S[4]||(S[4]=O=>$(-1)),disabled:h(de),class:"arrowPrevious"},[(o(),u("svg",Yt,[V("rect",{x:"0.5",y:"0.5",width:"35",height:"35",rx:"5.5",stroke:h(de)?"#d6d6d6":"var(--appointment_widgets-primary-color)"},null,8,Kt),V("path",{d:"M21.0352 8.58594L11.3281 18.293L21.0352 28L22.2109 26.8243L13.6796 18.293L22.2109 9.76166L21.0352 8.58594Z",fill:h(de)?"#d6d6d6":"var(--appointment_widgets-primary-color)"},null,8,Qt)]))],8,zt),e.joinNextPreviousArrow?(o(),u("button",{key:0,title:e.nextMonthCaption,onClick:S[5]||(S[5]=O=>$(1)),disabled:h(re),class:"arrowNext"},[(o(),u("svg",Gt,[V("rect",{x:"0.5",y:"0.5",width:"35",height:"35",rx:"5.5",stroke:h(re)?"#d6d6d6":"var(--appointment_widgets-primary-color)"},null,8,Zt),V("path",{d:"M14.5039 8.58594L24.2109 18.293L14.5039 28L13.3282 26.8243L21.8595 18.293L13.3282 9.76166L14.5039 8.58594Z",fill:h(re)?"#d6d6d6":"var(--appointment_widgets-primary-color)"},null,8,Jt)]))],8,Xt)):k("",!0)])):k("",!0),e.joinNextPreviousArrow?k("",!0):(o(),u("button",{key:1,title:e.prevMonthCaption,onClick:S[6]||(S[6]=O=>$(-1)),disabled:h(de),class:D([{vdpArrowPrevDisable:h(de)},"vdpArrow vdpArrowPrev"]),type:"button"},E(e.prevMonthCaption),11,_t)),e.joinNextPreviousArrow?k("",!0):(o(),u("button",{key:2,title:e.nextMonthCaption,onClick:S[7]||(S[7]=O=>$(1)),disabled:h(re),class:D([{vdpArrowNextDisable:h(re)},"vdpArrow vdpArrowNext"]),type:"button"},E(e.nextMonthCaption),11,ei)),V("div",ti,[V("div",ii,[(o(),u("button",{class:D(["text-capitalize",h(Pe)]),key:h(R).month,type:"button"},E(e.months[h(R).month]),3)),H(V("select",{"onUpdate:modelValue":S[8]||(S[8]=O=>h(R).month=O),class:D({vdpPeriodControlDisable:e.disablePeriodControl})},[(o(!0),u(te,null,ie(e.months,(O,j)=>(o(),u("option",{value:j,key:O},E(O),9,ni))),128))],2),[[Xe,h(R).month]])]),V("div",ai,[(o(),u("button",{class:D(h(Pe)),key:h(R).year,type:"button"},E(h(R).year),3)),H(V("select",{"onUpdate:modelValue":S[9]||(S[9]=O=>h(R).year=O),class:D({vdpPeriodControlDisable:e.disablePeriodControl})},[(o(!0),u(te,null,ie(h(bt),O=>(o(),u("option",{value:O,key:O},E(O),9,li))),128))],2),[[Xe,h(R).year]])])])]),V("table",ri,[V("thead",null,[V("tr",null,[(o(!0),u(te,null,ie(h(wt),O=>(o(),u("th",{key:O,class:"vdpHeadCell"},[V("span",si,E(O),1)]))),128))])]),(o(),u("tbody",{key:h(R).year+"-"+h(R).month,class:D(h(Pe))},[(o(!0),u(te,null,ie(h(pt),(O,j)=>(o(),u("tr",{key:j,class:"vdpRow"},[(o(!0),u(te,null,ie(O,P=>(o(),u("td",{class:D([{selectable:!P.disabled,selected:P.selected,disabled:P.disabled,today:P.today,outOfRange:P.outOfRange},"vdpCell"]),"data-id":P.dateKey,key:P.dateKey},[V("div",{onClick:se=>Se(P),class:"vdpCellContent"},E(P.date.getDate()),9,di)],10,oi))),128))]))),128))],2))]),e.pickTime&&h(le)?(o(),u("div",ui,[V("span",ci,E(e.setTimeCaption),1),V("div",hi,[V("pre",null,[V("span",null,E(h(le).hoursPadded),1),mi]),V("input",{onInput:S[10]||(S[10]=A(O=>he("setHours",O),["prevent"])),value:h(le).hoursPadded,type:"number",pattern:"\\d*",class:"vdpHoursInput"},null,40,fi)]),e.pickMinutes?(o(),u("span",vi,":")):k("",!0),e.pickMinutes?(o(),u("div",gi,[V("pre",null,[V("span",null,E(h(le).minutesPadded),1),yi]),e.pickMinutes?(o(),u("input",{key:0,onInput:S[11]||(S[11]=O=>he("setMinutes",O)),value:h(le).minutesPadded,type:"number",pattern:"\\d*",class:"vdpMinutesInput"},null,40,pi)):k("",!0)])):k("",!0),e.pickSeconds?(o(),u("span",bi,":")):k("",!0),e.pickSeconds?(o(),u("div",wi,[V("pre",null,[V("span",null,E(h(le).secondsPadded),1),ki]),e.pickSeconds?(o(),u("input",{key:0,onInput:S[12]||(S[12]=O=>he("setSeconds",O)),value:h(le).secondsPadded,type:"number",pattern:"\\d*",class:"vdpSecondsInput"},null,40,Vi)):k("",!0)])):k("",!0)])):k("",!0)])],34)):k("",!0)]),_:1})],2))}});const Oi={class:"form-builder--item"},Dl=I({__name:"HtmlInput",props:["item","localTagId"],setup(e){const i=e,n=C(()=>{var t;return"customHTML_"+((t=i.item)==null?void 0:t.tag)+"_"+i.localTagId});return(t,r)=>(o(),u("div",Oi,[U(jt,{id:h(n),code:e.item.html},null,8,["id","code"])]))}}),Fi={id:"_branding-wrap",class:"branding-wrap"},xi=["href"],$i={class:"cmp-name"},Ci={key:1,href:"https://gohighlevel.com",class:"branding-url",target:"_blank"},Ei=V("svg",{"data-v-1e92268e":"",xmlns:"http://www.w3.org/2000/svg",width:"150",height:"26"},[V("image",{"data-v-1e92268e":"",width:"28",height:"26","xlink:href":"data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAADeCAMAAAAjD+0vAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACKFBMVEUAAAD/vAD/vAD/vAA3yjc3yjc3yjf/vAD/vAA3yjc3yjf/vAD/vAD/vAA3yjc3yjf/vAD/vAD+uwH5twT/vAD/vAA3yjc3yjc3yjc2yDY1xjU3yjf/vADjqAs3yjc0uDQYi/YYi/b6uAI2xjb/vAA3yjcYi/YYi/YYi/YYi/bUsy0xvlrzug0Yi/YXgOgWddo1x0EYi/YWddkXd9z/vAA3yjfzrg/xrBEquycpuiX8uQPupxbqoxszxTIktB8isRz9ugLvqRQ0xzMltSH+uwHwqxI1yDUmtiL/vAHyrRA2yTUouCT0sA02yjYpuib2sgvqpBorvCj4tAnrpBouvyv5tgfrpRkvwS0jsh77twXsphgxwzAjsx7tpxczxTHvqRU0xjMltCDwqhM1yDT/uwDxrRE2yDUouCP0rw42yTYpuSX2sQz3tAotvir5tQcvwC0jsh3spRkxwy8yxDEjtB/uqBU0xjIltSD+ugI1xzQmtiEntyMouSX1sQz3swotvin5tQjrpBkuwCz6tgYwwi/7uAXtphcyxDD9uQPuqBYYi/YzxjLxrBImtyIVc9wVctsXg+4Xhe8VdN0Xh/EVdd4XiPMVduAXifQVeOEYivUWeuMYivYWfOUWfugXgOsXguwXhO8YhvEYiPIYifMWeOEVeeMWe+UWfecWf+oXhO4VdNwXhvAYh/IVdd8Wd+EYifQWeOIWeuQYi/UWf+kXgewXhfAVdN7///8CcMFSAAAANHRSTlMAHM03N80c3PHx3C/rLS3rfKC/zYsGBougy8B8UH5wWTfxclJwUDXrLe+JiXYQ5+124Ozq9vT/awAAAAFiS0dEt90AO2cAAAAHdElNRQfiAhgXEywya6S9AAAFmUlEQVR42u3a53cWRRTAYVDsil1RURMbsQvOAKJikAh2URQBY6FqrNjBrmAbNSJENMaOimKvf58vSQhv2d1p9969w9zf971znrN75twPO2lSQJMPODDkMaymHHQw1VGTD1GHMrJPOUwfTmRvyBUje0Ouieyjcj72UTmNfVzOxT4up7BPyHnYJ+T49iY5B3uTHNveIq/f3iLHtbfJ67a3yTHtHfJ67R1yPHuBvE57gRzLXiivz14ox7GXyOuyl8gx7KXyeuylcnh7hbwOe4Uc2l4pp7dXymHtFnnDfgQjOaTdKlfqyKMYyeHsDnJK+1S7HMruJKezTz3aQQ5jd5RT2R3lEHZnOY3dWR5v95BT2D3ksXYvOb7dSx5n95Rj2z3lMXZvOa7dWx5uD5Bj2gPkofYgOZ49SB5mD5Rj2QPlIfZgOY49WO5vj5Bj2CPkvvYoObw9Su5nj5RD2yPlPvZoOaw9Wu5uB5BD2gHkrnYQOZwdRO5mB5JD2YHkLnYwOYwdTG63A8oh7IBymx1UHm8HlVfbgeWxdmB5lR1cHmcHl5fbEeQxdgR5mR1FHm5HkRfbkeShdiR5kR1NHmZHk3faEeUhdkR5ux1V7m9HlbfakeW+dmR5sx1d7mdHl++zE8h97ATyvXYSubudRD5mJ5K72onko/ZjjrV23Ow51o63jznhRLv8pJOnWTtl7hXWTrWPOc3lTUyfd+VVtk53v8ZiO+Pq+dfYOhPorOmqdwEnur52IR1d9V3Hia4XLaajq+tv4ETXN95ER1fqZk50fcuthHR12xJGdK1vJ6SrO5Zyous7CenqrmWc6Pru5XR0tWIlJ7q+p5+Orubdy4mu75tPR1e993Oi6wdW0dFV32pOdL1mMR1drV3Hia7XP0hHV+ohTnQ98DAhXT3CiV643KDR1aNLOdH1Y4R09fgyTnT9xAY6ulrxJCe6fqqfjt6+3NRM108/Q0dXvc9youvnnqejq42rOdH1phfo6GrtHE50vf5FOrpSsznR9cBLhHT1Mie61nMJ6eqVJZzo+lVCunrtdU50/cYGOrravDKY3tUFTtdbltPR1ZtvBdK7urtD7NV0/XY/HV29824QvavbmBC7ha7fW0VHVxsXBND3yIPsNrretJCOrvre96aPyUPsVrpe9AEdXamzAuUBdjtdD5xNSD8nVO5vd6Drc9nSm+Xe9qTprXJfe8r0drmnPWF6p9zPni69SO5lT5ZeLPexp0ovk3vYE6WXy93tadKr5M72JOnV8ob9vP2VbpMbM6Nn/6Tb5W729Ogucid7cnQ3uYs9Nbqr3MGeGL3nfFe53Z4WvWeGu9xqT4ruJ7fZU6L7yi32hOj+8mp7OvQQeaU9GXqYvMqeCj1UXmFPhB4uL7enQY+Rl9qToMfJy+wp0GPlJfYE6PHyYjt/OoS80M6eDiMvsnOnQ8kL7MzpcPJOO286pLzDzpoOK2+3c6ZDy9vsjOnw8lY7XzqGvMXOlo4jb7ZzpWPJm+xM6XjyfXaedEz5hJ0lHVe+186Rji0ftzOk48vH7PzoFPJROzs6jXyPnRv9AiJ5w34hM/pFF9u7ZPBDW5c6jLmMGd3lD6qZW632WQ5juH3wTnTz0bZs6Wb7ULZ08/GObOnmk0+zpZvhz7Klm5HPs6WbkS+ypRvzZb5089VgtnTz9bZs6eaboWzp5tsd2dLNzu+ypZvh77Olm5EfsqWbkV3Z0o35MV9623KTFd38tDtbuvl5KFu6+eXXbOlm52/Z0s3vf2RLN8N/Zks3f+3Klm7M3/nSzT+D2dLN1t3Z0s2//2VLN9svz5ZuZgpd6EIXutCFLnShC13oQhe60IUudKELXehCF7rQhS50oQtd6EIXutCFLnShC13oQhe60IUudKELXehCF7rQhS50oQtd6EIXutDzov8PkVLtBMKmRJ4AAAAASUVORK5CYII="}),V("text",{x:"30",y:"22",fill:"#607179"},"Highlevel")],-1),Li=[Ei],Ml=I({__name:"Branding",props:{company:{type:Object,default:()=>({logoURL:"",domain:"",name:""})}},setup(e){return(i,n)=>(o(),u("div",Fi,[e.company&&e.company.logoURL?(o(),u("a",{key:0,href:"//"+e.company.domain,class:"branding-url",target:"_blank"},[U(He,{url:e.company.logoURL,size:200},null,8,["url"]),V("span",$i,E(e.company.name),1)],8,xi)):e.company?(o(),u("a",Ci,Li)):k("",!0)]))}}),Ti={class:"col-md-12 col-sm-12 col-lg-12 text-center thank-you-message"},Di=["innerHTML"],Pl=I({__name:"ThanksMessage",props:["payload"],setup(e){return(i,n)=>{var t,r,a,l,c,m,f,s,d;return o(),u("div",null,[V("div",Ti,[V("div",{innerHTML:e.payload.message,style:Le({backgroundColor:"#"+((r=(t=e.payload)==null?void 0:t.style)==null?void 0:r.bgColor)||"FFFFFF",color:"#"+((l=(a=e.payload)==null?void 0:a.style)==null?void 0:l.color)||"000000",fontSize:(((m=(c=e.payload)==null?void 0:c.style)==null?void 0:m.fontSize)||"28")+"px",fontFamily:((s=(f=e.payload)==null?void 0:f.style)==null?void 0:s.fontFamily)||"inherit",fontWeight:"500",width:"100%",maxWidth:"500px",margin:"auto",minHeight:(((d=e.payload)==null?void 0:d.height)||100)+"px"})},null,12,Di)])])}}});function Ce(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ce=function(i){return typeof i}:Ce=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ce(e)}function Mi(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function Ze(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function Pi(e,i,n){return i&&Ze(e.prototype,i),n&&Ze(e,n),e}function Je(e){return Ai(e)||qi(e)||ji(e)||Ui()}function Ai(e){if(Array.isArray(e))return Ue(e)}function qi(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ji(e,i){if(!!e){if(typeof e=="string")return Ue(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,i)}}function Ue(e,i){(i==null||i>e.length)&&(i=e.length);for(var n=0,t=new Array(i);n<i;n++)t[n]=e[n];return t}function Ui(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bi(e){var i;return typeof e=="function"?i={callback:e}:i=e,i}function Ri(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t,r,a,l=function(m){for(var f=arguments.length,s=new Array(f>1?f-1:0),d=1;d<f;d++)s[d-1]=arguments[d];if(a=s,!(t&&m===r)){var v=n.leading;typeof v=="function"&&(v=v(m,r)),(!t||m!==r)&&v&&e.apply(void 0,[m].concat(Je(a))),r=m,clearTimeout(t),t=setTimeout(function(){e.apply(void 0,[m].concat(Je(a))),t=0},i)}};return l._clear=function(){clearTimeout(t),t=null},l}function dt(e,i){if(e===i)return!0;if(Ce(e)==="object"){for(var n in e)if(!dt(e[n],i[n]))return!1;return!0}return!1}var Hi=function(){function e(i,n,t){Mi(this,e),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(n,t)}return Pi(e,[{key:"createObserver",value:function(n,t){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=Bi(n),this.callback=function(c,m){r.options.callback(c,m),c&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var a=this.options.throttleOptions||{},l=a.leading;this.callback=Ri(this.callback,this.options.throttle,{leading:function(m){return l==="both"||l==="visible"&&m||l==="hidden"&&!m}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(c){var m=c[0];if(c.length>1){var f=c.find(function(d){return d.isIntersecting});f&&(m=f)}if(r.callback){var s=m.isIntersecting&&m.intersectionRatio>=r.threshold;if(s===r.oldResult)return;r.oldResult=s,r.callback(s,m)}},this.options.intersection),Re(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function ut(e,i,n){var t=i.value;if(!!t)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new Hi(e,t,n);e._vue_visibilityState=r}}function Ii(e,i,n){var t=i.value,r=i.oldValue;if(!dt(t,r)){var a=e._vue_visibilityState;if(!t){ct(e);return}a?a.createObserver(t,n):ut(e,{value:t},n)}}function ct(e){var i=e._vue_visibilityState;i&&(i.destroyObserver(),delete e._vue_visibilityState)}var Ni={beforeMount:ut,updated:Ii,unmounted:ct};const Wi=/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,zi=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Yi=e=>e?Wi.test(e):!0,ne=e=>e==null||e==="",ht=(e,i)=>{if(!e)return!0;const n=window.libphonenumber.parsePhoneNumberFromString(e,i);return n?n.isValid():!1},Ki=e=>e?zi.test(e):!0,Qi=e=>e?Ke(e).isBefore(Ke()):!0,Xi=e=>{if(!e)return!0;var i=/^\d{4}-\d{2}-\d{2}$/;if(!e.match(i))return!1;var n=new Date(e),t=n.getTime();return!t&&t!==0?!1:n.toISOString().slice(0,10)===e},Al=e=>/^[A-Za-z]+/.test(e);/*!
 * Signature Pad v4.0.4 | https://github.com/szimek/signature_pad
 * (c) 2022 Szymon Nowak | Released under the MIT license
 */class Te{constructor(i,n,t,r){if(isNaN(i)||isNaN(n))throw new Error(`Point is invalid: (${i}, ${n})`);this.x=+i,this.y=+n,this.pressure=t||0,this.time=r||Date.now()}distanceTo(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))}equals(i){return this.x===i.x&&this.y===i.y&&this.pressure===i.pressure&&this.time===i.time}velocityFrom(i){return this.time!==i.time?this.distanceTo(i)/(this.time-i.time):0}}class Ie{constructor(i,n,t,r,a,l){this.startPoint=i,this.control2=n,this.control1=t,this.endPoint=r,this.startWidth=a,this.endWidth=l}static fromPoints(i,n){const t=this.calculateControlPoints(i[0],i[1],i[2]).c2,r=this.calculateControlPoints(i[1],i[2],i[3]).c1;return new Ie(i[1],t,r,i[2],n.start,n.end)}static calculateControlPoints(i,n,t){const r=i.x-n.x,a=i.y-n.y,l=n.x-t.x,c=n.y-t.y,m={x:(i.x+n.x)/2,y:(i.y+n.y)/2},f={x:(n.x+t.x)/2,y:(n.y+t.y)/2},s=Math.sqrt(r*r+a*a),d=Math.sqrt(l*l+c*c),v=m.x-f.x,p=m.y-f.y,x=d/(s+d),y={x:f.x+v*x,y:f.y+p*x},F=n.x-y.x,w=n.y-y.y;return{c1:new Te(m.x+F,m.y+w),c2:new Te(f.x+F,f.y+w)}}length(){let n=0,t,r;for(let a=0;a<=10;a+=1){const l=a/10,c=this.point(l,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),m=this.point(l,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){const f=c-t,s=m-r;n+=Math.sqrt(f*f+s*s)}t=c,r=m}return n}point(i,n,t,r,a){return n*(1-i)*(1-i)*(1-i)+3*t*(1-i)*(1-i)*i+3*r*(1-i)*i*i+a*i*i*i}}class Gi{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(i,n,t){this._et.addEventListener(i,n,t)}dispatchEvent(i){return this._et.dispatchEvent(i)}removeEventListener(i,n,t){this._et.removeEventListener(i,n,t)}}function Zi(e,i=250){let n=0,t=null,r,a,l;const c=()=>{n=Date.now(),t=null,r=e.apply(a,l),t||(a=null,l=[])};return function(...f){const s=Date.now(),d=i-(s-n);return a=this,l=f,d<=0||d>i?(t&&(clearTimeout(t),t=null),n=s,r=e.apply(a,l),t||(a=null,l=[])):t||(t=window.setTimeout(c,d)),r}}class De extends Gi{constructor(i,n={}){super(),this.canvas=i,this._handleMouseDown=t=>{t.buttons===1&&(this._drawningStroke=!0,this._strokeBegin(t))},this._handleMouseMove=t=>{this._drawningStroke&&this._strokeMoveUpdate(t)},this._handleMouseUp=t=>{t.buttons===1&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(t))},this._handleTouchStart=t=>{if(t.preventDefault(),t.targetTouches.length===1){const r=t.changedTouches[0];this._strokeBegin(r)}},this._handleTouchMove=t=>{t.preventDefault();const r=t.targetTouches[0];this._strokeMoveUpdate(r)},this._handleTouchEnd=t=>{if(t.target===this.canvas){t.preventDefault();const a=t.changedTouches[0];this._strokeEnd(a)}},this._handlePointerStart=t=>{this._drawningStroke=!0,t.preventDefault(),this._strokeBegin(t)},this._handlePointerMove=t=>{this._drawningStroke&&(t.preventDefault(),this._strokeMoveUpdate(t))},this._handlePointerEnd=t=>{this._drawningStroke&&(t.preventDefault(),this._drawningStroke=!1,this._strokeEnd(t))},this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.dotSize=n.dotSize||0,this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this._strokeMoveUpdate=this.throttle?Zi(De.prototype._strokeUpdate,this.throttle):De.prototype._strokeUpdate,this._ctx=i.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:i,canvas:n}=this;i.fillStyle=this.backgroundColor,i.clearRect(0,0,n.width,n.height),i.fillRect(0,0,n.width,n.height),this._data=[],this._reset(),this._isEmpty=!0}fromDataURL(i,n={}){return new Promise((t,r)=>{const a=new Image,l=n.ratio||window.devicePixelRatio||1,c=n.width||this.canvas.width/l,m=n.height||this.canvas.height/l,f=n.xOffset||0,s=n.yOffset||0;this._reset(),a.onload=()=>{this._ctx.drawImage(a,f,s,c,m),t()},a.onerror=d=>{r(d)},a.crossOrigin="anonymous",a.src=i,this._isEmpty=!1})}toDataURL(i="image/png",n){switch(i){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(i,n)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const i=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!i?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(i,{clear:n=!0}={}){n&&this.clear(),this._fromData(i,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(i)}toData(){return this._data}_strokeBegin(i){this.dispatchEvent(new CustomEvent("beginStroke",{detail:i}));const n={dotSize:this.dotSize,minWidth:this.minWidth,maxWidth:this.maxWidth,penColor:this.penColor,points:[]};this._data.push(n),this._reset(),this._strokeUpdate(i)}_strokeUpdate(i){if(this._data.length===0){this._strokeBegin(i);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:i}));const n=i.clientX,t=i.clientY,r=i.pressure!==void 0?i.pressure:i.force!==void 0?i.force:0,a=this._createPoint(n,t,r),l=this._data[this._data.length-1],c=l.points,m=c.length>0&&c[c.length-1],f=m?a.distanceTo(m)<=this.minDistance:!1,{penColor:s,dotSize:d,minWidth:v,maxWidth:p}=l;if(!m||!(m&&f)){const x=this._addPoint(a);m?x&&this._drawCurve(x,{penColor:s,dotSize:d,minWidth:v,maxWidth:p}):this._drawDot(a,{penColor:s,dotSize:d,minWidth:v,maxWidth:p}),c.push({time:a.time,x:a.x,y:a.y,pressure:a.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:i}))}_strokeEnd(i){this._strokeUpdate(i),this.dispatchEvent(new CustomEvent("endStroke",{detail:i}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),document.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(i,n,t){const r=this.canvas.getBoundingClientRect();return new Te(i-r.left,n-r.top,t,new Date().getTime())}_addPoint(i){const{_lastPoints:n}=this;if(n.push(i),n.length>2){n.length===3&&n.unshift(n[0]);const t=this._calculateCurveWidths(n[1],n[2]),r=Ie.fromPoints(n,t);return n.shift(),r}return null}_calculateCurveWidths(i,n){const t=this.velocityFilterWeight*n.velocityFrom(i)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(t),a={end:r,start:this._lastWidth};return this._lastVelocity=t,this._lastWidth=r,a}_strokeWidth(i){return Math.max(this.maxWidth/(i+1),this.minWidth)}_drawCurveSegment(i,n,t){const r=this._ctx;r.moveTo(i,n),r.arc(i,n,t,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(i,n){const t=this._ctx,r=i.endWidth-i.startWidth,a=Math.ceil(i.length())*2;t.beginPath(),t.fillStyle=n.penColor;for(let l=0;l<a;l+=1){const c=l/a,m=c*c,f=m*c,s=1-c,d=s*s,v=d*s;let p=v*i.startPoint.x;p+=3*d*c*i.control1.x,p+=3*s*m*i.control2.x,p+=f*i.endPoint.x;let x=v*i.startPoint.y;x+=3*d*c*i.control1.y,x+=3*s*m*i.control2.y,x+=f*i.endPoint.y;const y=Math.min(i.startWidth+f*r,n.maxWidth);this._drawCurveSegment(p,x,y)}t.closePath(),t.fill()}_drawDot(i,n){const t=this._ctx,r=n.dotSize>0?n.dotSize:(n.minWidth+n.maxWidth)/2;t.beginPath(),this._drawCurveSegment(i.x,i.y,r),t.closePath(),t.fillStyle=n.penColor,t.fill()}_fromData(i,n,t){for(const r of i){const{penColor:a,dotSize:l,minWidth:c,maxWidth:m,points:f}=r;if(f.length>1)for(let s=0;s<f.length;s+=1){const d=f[s],v=new Te(d.x,d.y,d.pressure,d.time);this.penColor=a,s===0&&this._reset();const p=this._addPoint(v);p&&n(p,{penColor:a,dotSize:l,minWidth:c,maxWidth:m})}else this._reset(),t(f[0],{penColor:a,dotSize:l,minWidth:c,maxWidth:m})}}_toSVG(){const i=this._data,n=Math.max(window.devicePixelRatio||1,1),t=0,r=0,a=this.canvas.width/n,l=this.canvas.height/n,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width",this.canvas.width.toString()),c.setAttribute("height",this.canvas.height.toString()),this._fromData(i,(p,{penColor:x})=>{const y=document.createElement("path");if(!isNaN(p.control1.x)&&!isNaN(p.control1.y)&&!isNaN(p.control2.x)&&!isNaN(p.control2.y)){const F=`M ${p.startPoint.x.toFixed(3)},${p.startPoint.y.toFixed(3)} C ${p.control1.x.toFixed(3)},${p.control1.y.toFixed(3)} ${p.control2.x.toFixed(3)},${p.control2.y.toFixed(3)} ${p.endPoint.x.toFixed(3)},${p.endPoint.y.toFixed(3)}`;y.setAttribute("d",F),y.setAttribute("stroke-width",(p.endWidth*2.25).toFixed(3)),y.setAttribute("stroke",x),y.setAttribute("fill","none"),y.setAttribute("stroke-linecap","round"),c.appendChild(y)}},(p,{penColor:x,dotSize:y,minWidth:F,maxWidth:w})=>{const b=document.createElement("circle"),$=y>0?y:(F+w)/2;b.setAttribute("r",$.toString()),b.setAttribute("cx",p.x.toString()),b.setAttribute("cy",p.y.toString()),b.setAttribute("fill",x),c.appendChild(b)});const m="data:image/svg+xml;base64,",f=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="${t} ${r} ${this.canvas.width} ${this.canvas.height}" width="${a}" height="${l}">`;let s=c.innerHTML;if(s===void 0){const p=document.createElement("dummy"),x=c.childNodes;p.innerHTML="";for(let y=0;y<x.length;y+=1)p.appendChild(x[y].cloneNode(!0));s=p.innerHTML}const d="</svg>",v=f+s+d;return m+btoa(v)}}const Ji={class:"form-builder--item"},_i=["innerHTML"],en={key:1},tn={key:0},nn=["name","value","id"],an={key:3,id:"error-container",class:"error"},ql=I({__name:"SignatureElement",props:{kind:{type:String},item:{type:Object},formFieldsValue:{type:Object},formLabelVisible:{type:Boolean},errors:{type:Object,default:()=>({})}},emits:["updateFormFieldsValue","addOrUpdateError"],setup(e,{expose:i,emit:n}){const t=e;Dt().vueApp.directive("observe-visibility",Ni);const l=T(),c=T(),m=T(),f=C(()=>t.kind=="form"),s=C(()=>t.kind=="survey"),d=C(()=>t.errors[t.item.tag]),v=(M,q)=>{n("addOrUpdateError",{tag:M,error:q})},p=()=>{if(s.value)return;const M=t.formFieldsValue[t.item.tag];t.item.required&&ne(M)?v(t.item.tag,`${t.item.label} is required`):v(t.item.tag,null)},x=(M,q)=>{for(var Y=M.split(","),Z=Y[0].match(/:(.*?);/)[1],N=atob(Y[1]),X=N.length,ae=new Uint8Array(X);X--;)ae[X]=N.charCodeAt(X);return new File([ae],q,{type:Z})},y=M=>{m.value.clear(),b(M,void 0),p()},F=()=>{Re(()=>{const M=m.value.toData();l.value.width=c.value.offsetWidth,l.value.height=c.value.offsetHeight,m.value.clear(),m.value.fromData(M)})},w=(M,q)=>{M&&F()},b=(M,q)=>{n("updateFormFieldsValue",{tag:M,value:q})},$=M=>{const{isEmpty:q,data:Y}=G();if(!q){const Z=x(Y,`sign-timestamp-${Math.floor(+new Date().getTime()/1e3).toString()}.png`);b(M,Z),p()}},L=M=>Qe.includes(M),z=(M,q)=>{m.value=new De(M,{...$t,...q})},G=(M=Qe[0],q)=>{var X,ae;const Y={isEmpty:!1,data:void 0};if(!L(M))throw new Error("The Image type is incorrect!");const N=(X=m.value)==null?void 0:X.isEmpty();if(N===void 0)throw new Error("Canvas element is invalid!");return N?{...Y,isEmpty:N}:{...Y,data:(ae=m.value)==null?void 0:ae.toDataURL(M,q)}};return ce(l,()=>{z(l.value)}),i({validate:p,item:t.item,resizeCanvas:F}),(M,q)=>{const Y=Ut,Z=Mt("observe-visibility");return o(),u("div",Ji,[h(s)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,_i)):k("",!0),e.formLabelVisible?(o(),u("label",en,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",tn,"*")):k("",!0)])):k("",!0),V("section",{onMouseleave:q[1]||(q[1]=N=>$(e.item.tag)),onTouchend:q[2]||(q[2]=N=>$(e.item.tag)),class:"signature-container"},[U(Y,null,{default:Ee(()=>[H((o(),u("div",{style:{width:"100%"},ref:N=>{c.value=N}},[V("canvas",{class:"signature-button",ref:N=>{l.value=N},style:{"min-height":"150px"}},null,512)])),[[Z,{callback:w,once:!0}]])]),_:1}),V("a",{class:"clear-button",onClick:q[0]||(q[0]=A(N=>y(e.item.tag),["prevent"]))},"Clear")],32),h(f)?(o(),u("input",{key:2,class:"file-input",name:e.item.label,value:e.formFieldsValue[e.item.tag],id:e.item.tag},null,8,nn)):k("",!0),h(d)?(o(),u("div",an,E(h(d)),1)):k("",!0)])}}});const ln={class:"form-builder--item"},rn=["innerHTML"],sn={key:1},on={key:0},dn=["for"],un=V("svg",{width:"1em",height:"2em",viewBox:"0 0 16 16",class:"bi bi-upload",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[V("path",{"fill-rule":"evenodd",d:"M.5 8a.5.5 0 0 1 .5.5V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8.5a.5.5 0 0 1 1 0V12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5A.5.5 0 0 1 .5 8zM5 4.854a.5.5 0 0 0 .707 0L8 2.56l2.293 2.293A.5.5 0 1 0 11 4.146L8.354 1.5a.5.5 0 0 0-.708 0L5 4.146a.5.5 0 0 0 0 .708z"}),V("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8A.5.5 0 0 1 8 2z"})],-1),cn=["accept","name","id","multiple"],hn={key:2,id:"error-container",class:"error"},jl=I({__name:"FileUploadElement",props:{kind:{type:String},item:{type:Object},formFieldsValue:{type:Object},formLabelVisible:{type:Boolean},errors:{type:Object,default:()=>({})}},emits:["updateFormFieldsValue","addOrUpdateError"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>t.kind=="form"),a=C(()=>t.kind=="survey"),l=C(()=>t.errors[t.item.tag]),c=T(),m=T("");ke(()=>{m.value=Bt()});const f=F=>{var w=F==0?0:Math.floor(Math.log(F)/Math.log(1024));return Number((F/Math.pow(1024,w)).toFixed(2))*1+" "+["B","kB","MB","GB","TB"][w]},s=F=>{if(t.formFieldsValue[F.tag])if(t.formFieldsValue[F.tag].hasOwnProperty("files")){let w=t.formFieldsValue[F.tag].files.length,b=[];for(let $=0;$<w;$++)b.push(`${t.formFieldsValue[F.tag].files[$].name} - ${f(t.formFieldsValue[F.tag].files[$].size)}`);return b}else return[`${t.formFieldsValue[F.tag].name} - ${f(t.formFieldsValue[F.tag].size)}`];else return[`${F.placeholder} ${F.picklistOptions.length&&F.placeholder?"-":""} ${F.picklistOptions.join(", ")}`]},d=F=>F.reduce((w,b)=>{const $=b.substring(1);return Object.keys(Ge).includes($)?[...w,...Ge[$]]:[...w,$]},[]),v=(F,w)=>{n("updateFormFieldsValue",{tag:F,value:w})},p=F=>{if(c.value.files.length>F.multiFileLimit)return alert(`The field only allows a maximum of ${F.multiFileLimit} files`);if(c.value.files.length){const w={files:c.value.files};v(F.tag,w)}else v(F.tag,null)},x=(F,w)=>{n("addOrUpdateError",{tag:F,error:w})};return i({validate:async()=>{if(a.value)return;const F=c.value.files;if(t.item.required&&F.length===0)x(t.item.tag,`${t.item.label} is required`);else{const w=await Promise.all(Object.values(F).map(L=>L.type.split("/")[1])),b=d(t.item.picklistOptions);let $=!1;(b==null?void 0:b.length)!==0&&await Promise.all(w.map(L=>{if(b.findIndex(G=>G===L)===-1){x(t.item.tag,"Invalid file extension!"),$=!0;return}})),$||x(t.item.tag,null)}},item:t.item}),(F,w)=>(o(),u("div",{class:D(["file-upload",{"padding-10":h(a)}])},[V("div",ln,[h(a)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,rn)):k("",!0),e.formLabelVisible?(o(),u("label",sn,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",on,"*")):k("",!0)])):k("",!0),V("label",{class:"custom-file-upload",for:h(m)},[un,(o(!0),u(te,null,ie(s(e.item),(b,$)=>(o(),u("section",{key:$,class:D({"mb-6":h(r),"mb-10":h(a)})},E(b),3))),128))],8,dn),V("input",{class:"file-input",type:"file",accept:e.item.picklistOptions.join(","),onChange:w[0]||(w[0]=b=>p(e.item)),ref:b=>c.value=b,name:e.item.label,id:h(m),multiple:e.item.multipleFilesAllowed},null,40,cn),h(l)?(o(),u("div",hn,E(h(l)),1)):k("",!0)])],2))}});const mn=["innerHTML","for"],fn=["for","id"],vn={key:0},gn={key:1,class:"custom-html-date date-picker-custom-style"},yn=["placeholder","name"],pn=["id"],bn={key:3,id:"error-container",class:"error"},Ul=I({__name:"DateElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},errors:{type:Object,default:()=>({})}},emits:["dateSelected","addOrUpdateError"],setup(e,{expose:i,emit:n}){const t=e,r=T(null),a=Ct(),l=()=>{document.getElementById(`${a}-label`).click()};C(()=>t.kind=="form");const c=C(()=>t.kind=="survey"),m=C(()=>t.errors[t.item.tag]),f=()=>{if(c.value)return;const d=t.formFieldsValue[t.item.tag];if(t.item.required&&ne(d))s(t.item.tag,`${t.item.label} is required`);else{if(Xi(d)){if(t.item.tag==="date_of_birth"&&!Qi(d)){s(t.item.tag,"Date cannot be in the future. Click the year to select a year from the past");return}}else{s(t.item.tag,"Date not in YYYY-MM-DD format");return}s(t.item.tag,null)}},s=(d,v)=>{n("addOrUpdateError",{tag:d,error:v})};return i({validate:f,item:t.item}),(d,v)=>(o(),u("div",{class:D(["form-builder--item",{"d-none":e.item.hidden,"form-builder--item-input":h(c)}])},[h(c)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description",for:h(a)+"-NativeDatePicker"},null,8,mn)):k("",!0),H(V("label",{for:h(a)+"-NativeDatePicker",id:h(a)+"-label"},[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",vn,"*")):k("",!0)],8,fn),[[ge,e.formLabelVisible]]),h(Be)()&&!h(Et)()?(o(),u("div",gn,[H(V("input",{type:"text",placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,onClick:l,name:e.item.tag,"onUpdate:modelValue":v[0]||(v[0]=p=>e.formFieldsValue[e.item.tag]=p),class:D(["date-picker-custom-style",{"date-picker-field-survey":h(c)}]),readonly:""},null,10,yn),[[oe,e.formFieldsValue[e.item.tag]]]),H(V("input",{type:"date",name:"NativeDatePicker",id:h(a)+"-NativeDatePicker",ref_key:"datePicker",ref:r,"onUpdate:modelValue":v[1]||(v[1]=p=>e.formFieldsValue[e.item.tag]=p),onInput:v[2]||(v[2]=p=>f()),class:"native-picker-style"},null,40,pn),[[oe,e.formFieldsValue[e.item.tag]]])])):(o(),ee(Si,{key:2,modelValue:e.formFieldsValue[e.item.tag],"onUpdate:modelValue":v[3]||(v[3]=p=>e.formFieldsValue[e.item.tag]=p),format:"YYYY-MM-DD",displayFormat:"YYYY-MM-DD",name:e.item.tag,placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,selectableYearRange:100,class:D(["date-picker-custom-style",{"date-picker-field-survey":h(c)}]),"data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,8,["modelValue","name","placeholder","class","data-q","data-required"])),h(m)?(o(),u("div",bn,E(h(m)),1)):k("",!0)],2))}});function Ae(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function wn(e){return(...i)=>!e(...i)}function kn(e,i){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(i.trim())!==-1}function mt(e,i,n,t){return i?e.filter(r=>kn(t(r,n),i)).sort((r,a)=>t(r,n).length-t(a,n).length):e}function Vn(e){return e.filter(i=>!i.$isLabel)}function qe(e,i){return n=>n.reduce((t,r)=>r[e]&&r[e].length?(t.push({$groupLabel:r[i],$isLabel:!0}),t.concat(r[e])):t,[])}function Sn(e,i,n,t,r){return a=>a.map(l=>{if(!l[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const c=mt(l[n],e,i,r);return c.length?{[t]:l[t],[n]:c}:[]})}const _e=(...e)=>i=>e.reduce((n,t)=>t(n),i);var On={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,i){return Ae(e)?"":i?e[i]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",i=e.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,i,this.label):mt(n,i,this.label,this.customLabel):n=this.groupValues?qe(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(wn(this.isSelected)):n,this.taggable&&i.length&&!this.isExistingOption(i)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(i=>this.customLabel(i,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,i,n){return _e(Sn(i,n,this.groupValues,this.groupLabel,this.customLabel),qe(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return _e(qe(this.groupValues,this.groupLabel),Vn)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const i=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(i)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(Ae(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const i=this.customLabel(e,this.label);return Ae(i)?"":i},select(e,i){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(i)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(i==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){i!=="Tab"&&this.removeElement(e);return}this.$emit("select",e,this.id),this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const i=this.options.find(n=>n[this.groupLabel]===e.$groupLabel);if(!!i){if(this.wholeGroupSelected(i)){this.$emit("remove",i[this.groupValues],this.id);const n=this.internalValue.filter(t=>i[this.groupValues].indexOf(t)===-1);this.$emit("update:modelValue",n)}else{const n=i[this.groupValues].filter(t=>!(this.isOptionDisabled(t)||this.isSelected(t)));this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(i=>this.isSelected(i)||this.isOptionDisabled(i))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,i=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.$emit("remove",e,this.id),this.multiple){const t=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",t)}else this.$emit("update:modelValue",null);this.closeOnSelect&&i&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.$el.focus(),this.$emit("open",this.id))},deactivate(){!this.isOpen||(this.isOpen=!1,this.searchable?this.$refs.search&&this.$refs.search.blur():this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,i=window.innerHeight-this.$el.getBoundingClientRect().bottom;i>this.maxHeight||i>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(i-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},Fn={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,i){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(i)}},groupHighlight(e,i){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":i.$isLabel}];const n=this.options.find(t=>t[this.groupLabel]===i.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){!this.closeOnSelect||(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},Ne={name:"vue-multiselect",mixins:[On,Fn],props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const xn={ref:"tags",class:"multiselect__tags"},$n={class:"multiselect__tags-wrap"},Cn={class:"multiselect__spinner"},En={key:0},Ln={class:"multiselect__option"},Tn={class:"multiselect__option"},Dn=W("No elements found. Consider changing the search query."),Mn={class:"multiselect__option"},Pn=W("List is empty.");function An(e,i,n,t,r,a){return o(),ee("div",{tabindex:e.searchable?-1:n.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":a.isAbove},"multiselect"],onFocus:i[14]||(i[14]=l=>e.activate()),onBlur:i[15]||(i[15]=l=>e.searchable?!1:e.deactivate()),onKeydown:[i[16]||(i[16]=Q(A(l=>e.pointerForward(),["self","prevent"]),["down"])),i[17]||(i[17]=Q(A(l=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:i[18]||(i[18]=Q(A(l=>e.addPointerElement(l),["stop","self"]),["enter","tab"])),onKeyup:i[19]||(i[19]=Q(l=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[J(e.$slots,"caret",{toggle:e.toggle},()=>[U("div",{onMousedown:i[1]||(i[1]=A(l=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),J(e.$slots,"clear",{search:e.search}),U("div",xn,[J(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:a.visibleValues,isOpen:e.isOpen},()=>[H(U("div",$n,[(o(!0),ee(te,null,ie(a.visibleValues,(l,c)=>J(e.$slots,"tag",{option:l,search:e.search,remove:e.removeElement},()=>[(o(),ee("span",{class:"multiselect__tag",key:c},[U("span",{textContent:E(e.getOptionLabel(l))},null,8,["textContent"]),U("i",{tabindex:"1",onKeypress:Q(A(m=>e.removeElement(l),["prevent"]),["enter"]),onMousedown:A(m=>e.removeElement(l),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[ge,a.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>n.limit?J(e.$slots,"limit",{key:0},()=>[U("strong",{class:"multiselect__strong",textContent:E(n.limitText(e.internalValue.length-n.limit))},null,8,["textContent"])]):k("v-if",!0)]),U(je,{name:"multiselect__loading"},{default:Ee(()=>[J(e.$slots,"loading",{},()=>[H(U("div",Cn,null,512),[[ge,n.loading]])])]),_:3}),e.searchable?(o(),ee("input",{key:0,ref:"search",name:n.name,id:e.id,type:"text",autocomplete:"off",spellcheck:"false",placeholder:e.placeholder,style:a.inputStyle,value:e.search,disabled:n.disabled,tabindex:n.tabindex,onInput:i[2]||(i[2]=l=>e.updateSearch(l.target.value)),onFocus:i[3]||(i[3]=A(l=>e.activate(),["prevent"])),onBlur:i[4]||(i[4]=A(l=>e.deactivate(),["prevent"])),onKeyup:i[5]||(i[5]=Q(l=>e.deactivate(),["esc"])),onKeydown:[i[6]||(i[6]=Q(A(l=>e.pointerForward(),["prevent"]),["down"])),i[7]||(i[7]=Q(A(l=>e.pointerBackward(),["prevent"]),["up"])),i[9]||(i[9]=Q(A(l=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:i[8]||(i[8]=Q(A(l=>e.addPointerElement(l),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):k("v-if",!0),a.isSingleLabelVisible?(o(),ee("span",{key:1,class:"multiselect__single",onMousedown:i[10]||(i[10]=A((...l)=>e.toggle&&e.toggle(...l),["prevent"]))},[J(e.$slots,"singleLabel",{option:a.singleValue},()=>[W(E(e.currentOptionLabel),1)])],32)):k("v-if",!0),a.isPlaceholderVisible?(o(),ee("span",{key:2,class:"multiselect__placeholder",onMousedown:i[11]||(i[11]=A((...l)=>e.toggle&&e.toggle(...l),["prevent"]))},[J(e.$slots,"placeholder",{},()=>[W(E(e.placeholder),1)])],32)):k("v-if",!0)],512),U(je,{name:"multiselect"},{default:Ee(()=>[H(U("div",{class:"multiselect__content-wrapper",onFocus:i[12]||(i[12]=(...l)=>e.activate&&e.activate(...l)),tabindex:"-1",onMousedown:i[13]||(i[13]=A(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[U("ul",{class:"multiselect__content",style:a.contentStyle,role:"listbox",id:"listbox-"+e.id},[J(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(o(),ee("li",En,[U("span",Ln,[J(e.$slots,"maxElements",{},()=>[W("Maximum of "+E(e.max)+" options selected. First remove a selected option to select another.",1)])])])):k("v-if",!0),!e.max||e.internalValue.length<e.max?(o(!0),ee(te,{key:1},ie(e.filteredOptions,(l,c)=>(o(),ee("li",{class:"multiselect__element",key:c,id:e.id+"-"+c,role:l&&(l.$isLabel||l.$isDisabled)?null:"option"},[l&&(l.$isLabel||l.$isDisabled)?k("v-if",!0):(o(),ee("span",{key:0,class:[e.optionHighlight(c,l),"multiselect__option"],onClick:A(m=>e.select(l),["stop"]),onMouseenter:A(m=>e.pointerSet(c),["self"]),"data-select":l&&l.isTag?e.tagPlaceholder:a.selectLabelText,"data-selected":a.selectedLabelText,"data-deselect":a.deselectLabelText},[J(e.$slots,"option",{option:l,search:e.search,index:c},()=>[U("span",null,E(e.getOptionLabel(l)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),l&&(l.$isLabel||l.$isDisabled)?(o(),ee("span",{key:1,"data-select":e.groupSelect&&a.selectGroupLabelText,"data-deselect":e.groupSelect&&a.deselectGroupLabelText,class:[e.groupHighlight(c,l),"multiselect__option"],onMouseenter:A(m=>e.groupSelect&&e.pointerSet(c),["self"]),onMousedown:A(m=>e.selectGroup(l),["prevent"])},[J(e.$slots,"option",{option:l,search:e.search,index:c},()=>[U("span",null,E(e.getOptionLabel(l)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):k("v-if",!0)],8,["id","role"]))),128)):k("v-if",!0),H(U("li",null,[U("span",Tn,[J(e.$slots,"noResult",{search:e.search},()=>[Dn])])],512),[[ge,n.showNoResults&&e.filteredOptions.length===0&&e.search&&!n.loading]]),H(U("li",null,[U("span",Mn,[J(e.$slots,"noOptions",{},()=>[Pn])])],512),[[ge,n.showNoOptions&&e.options.length===0&&!e.search&&!n.loading]]),J(e.$slots,"afterList")],12,["id"])],36),[[ge,e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Ne.render=An;const qn=["innerHTML"],jn={key:1},Un={key:0},Bn={key:2,id:"error-container",class:"error"},Bl=I({__name:"OptionElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","handleFieldLogicChange"],setup(e,{expose:i,emit:n}){const t=e,r=T(),a=C(()=>t.kind=="survey"),l=C(()=>t.errors[t.item.tag]),c=C(()=>t.item.type==="single_options"),m=C(()=>t.item.type==="multiple_options"),f=(v,p)=>{r.value=v,a.value&&c.value&&n("handleFieldLogicChange",{...p,selectedOption:v})},s=()=>{if(a.value)return;const v=r.value;let p;c.value?p=ne(v):m.value&&(p=v?!v.length:!0),t.item.required&&p?d(t.item.tag,`${t.item.label} is required`):d(t.item.tag,null)},d=(v,p)=>{n("addOrUpdateError",{tag:v,error:p})};return i({validate:s,item:t.item}),(v,p)=>(o(),u("div",{class:D(["form-builder--item field-container",{"d-none":e.item.hidden,"form-builder--item-input":h(a)}])},[h(a)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,qn)):k("",!0),e.formLabelVisible?(o(),u("label",jn,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",Un,"*")):k("",!0)])):k("",!0),U(h(Ne),{modelValue:e.formFieldsValue[e.item.tag],"onUpdate:modelValue":p[0]||(p[0]=x=>e.formFieldsValue[e.item.tag]=x),placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,options:e.item.picklistOptions,allowEmpty:!h(c),multiple:!!h(m),"show-labels":!1,closeOnSelect:!0,class:"multi_select_form",onSelect:p[1]||(p[1]=x=>{f(x,e.item)}),searchable:!h(Be)()},null,8,["modelValue","placeholder","name","options","allowEmpty","multiple","searchable"]),h(l)?(o(),u("div",Bn,E(h(l)),1)):k("",!0)],2))}});const Rn={key:0},Hn={key:0},In={key:1,id:"error-container",class:"error"},Rl=I({__name:"CountryOptionElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formattedCountry:{type:String},countries:{type:Array},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","updateFormattedCountry"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>t.kind=="survey"),a=C(()=>t.errors[t.item.tag]),l=C({get:()=>t.formattedCountry,set:f=>{c(f),n("updateFormattedCountry",f)}}),c=f=>{let s;f?s=f:s=l.value,t.item.required&&ne(s)?m(t.item.tag,`${t.item.label} is required`):m(t.item.tag,null)},m=(f,s)=>{n("addOrUpdateError",{tag:f,error:s})};return i({validate:c,item:t.item}),(f,s)=>(o(),u("div",{class:D(["form-builder--item",{"d-none":e.item.hidden,"form-builder--item-input":h(r)}])},[e.formLabelVisible?(o(),u("label",Rn,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",Hn,"*")):k("",!0)])):k("",!0),U(h(Ne),{modelValue:h(l),"onUpdate:modelValue":s[0]||(s[0]=d=>Pt(l)?l.value=d:null),placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,options:e.countries,allowEmpty:!1,"show-labels":!1,closeOnSelect:!0,class:"multi_select_form",searchable:!h(Be)()},null,8,["modelValue","placeholder","name","options","searchable"]),h(a)?(o(),u("div",In,E(h(a)),1)):k("",!0)],2))}}),Nn={class:"option-radio-image"},Wn=["innerHTML"],zn={key:1},Yn={key:0},Kn={key:0},Qn=["id","name","value","data-q","data-required"],Xn={class:"radio-image-option-set"},Gn=["for"],Zn={class:"opt-container-img-label"},Jn={class:"img-opt-title"},_n={key:0,id:"error-container",class:"error"},Hl=I({__name:"RadioImageOptionElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},localTagId:{type:String},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","handleFieldLogicChange","isSlideMovable"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>t.kind=="form"),a=C(()=>t.kind=="survey"),l=C(()=>t.errors[t.item.tag]),c=s=>{a.value&&n("handleFieldLogicChange",s)},m=()=>{if(a.value)return;const s=t.formFieldsValue[t.item.tag];t.item.required&&ne(s)?f(t.item.tag,`${t.item.label} is required`):f(t.item.tag,null)},f=(s,d)=>{n("addOrUpdateError",{tag:s,error:d})};return i({validate:m,item:t.item}),(s,d)=>(o(),u("div",Nn,[V("div",{class:D(["form-builder--item",{"d-none":e.item.hidden,"form-builder--item-input":h(a)}])},[h(a)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,Wn)):k("",!0),e.formLabelVisible?(o(),u("label",zn,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",Yn,"*")):k("",!0)])):k("",!0)],2),V("div",{class:D(["row container-group-image p-0",{"form-builder--item":h(r)}])},[(o(!0),u(te,null,ie(e.item.picklistOptionsImage,(v,p)=>(o(),u("div",{key:p,class:"option-radio col-md-3 col-sm-6 col-6 px-2"},[v!==""?(o(),u("div",Kn,[H(V("input",{id:v.label+"_"+e.item.tag+"_"+p+"_"+e.localTagId,"onUpdate:modelValue":d[0]||(d[0]=x=>e.formFieldsValue[e.item.tag]=x),name:e.item.tag,value:v.label,onChange:d[1]||(d[1]=x=>c(e.item)),type:"radio","data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,40,Qn),[[tt,e.formFieldsValue[e.item.tag]]]),V("div",Xn,[V("label",{for:v.label+"_"+e.item.tag+"_"+p+"_"+e.localTagId,class:"pl-0"},[V("div",Zn,[U(He,{url:v.src,class:"radio-image-option-set-image py-2"},null,8,["url"])])],8,Gn),V("div",Jn,E(v.label),1)])])):k("",!0)]))),128)),h(l)?(o(),u("div",_n,E(h(l)),1)):k("",!0)],2)]))}});const ea=["innerHTML"],ta={key:1},ia={key:0},na={key:0,style:{display:"flex","align-items":"center","margin-bottom":"5px"}},aa=["id","value","checked","data-q","data-required"],la=["for"],ra={key:2,class:"option-radio"},sa=["id","value"],oa=["id","for"],da=["for"],ua={key:3,id:"error-container",class:"error"},Il=I({__name:"RadioOptionElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},localTagId:{type:String},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","handleFieldLogicChange","resetFieldsValue","setRadioValue"],setup(e,{expose:i,emit:n}){const t=e;C(()=>t.kind=="form");const r=C(()=>t.kind=="survey"),a=C(()=>t.errors[t.item.tag]),l=T(),c=x=>{r.value&&n("handleFieldLogicChange",x)},m=x=>{n("resetFieldsValue",x)},f=(x,y)=>{n("setRadioValue",{item:x,event:y})},s=(x,y)=>{l.value.checked=!0,f(x,y)},d=()=>{l.value&&(l.value.checked=!1)},v=()=>{if(r.value)return;const x=t.formFieldsValue[t.item.tag];t.item.required&&ne(x)?p(t.item.tag,`${t.item.label} is required`):p(t.item.tag,null)},p=(x,y)=>{n("addOrUpdateError",{tag:x,error:y})};return i({validate:v,item:t.item}),(x,y)=>(o(),u("div",{class:D(["form-builder--item",{"d-none":e.item.hidden,"form-builder--item-input":h(r)}])},[h(r)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,ea)):k("",!0),e.formLabelVisible?(o(),u("label",ta,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",ia,"*")):k("",!0)])):k("",!0),(o(!0),u(te,null,ie(e.item.picklistOptions,(F,w)=>(o(),u("div",{key:w,class:"option-radio"},[F!==""?(o(),u("div",na,[H(V("input",{id:F+"_"+e.item.tag+"_"+w+"_"+e.localTagId,"onUpdate:modelValue":y[0]||(y[0]=b=>e.formFieldsValue[e.item.tag]=b),value:F,checked:e.formFieldsValue[e.item.tag]==F,onChange:y[1]||(y[1]=b=>(c(e.item),d())),type:"radio","data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,40,aa),[[tt,e.formFieldsValue[e.item.tag]]]),V("label",{style:{"margin-left":"10px","margin-bottom":"0"},for:F+"_"+e.item.tag+"_"+w+"_"+e.localTagId},E(F),9,la)])):k("",!0)]))),128)),e.item.allowCustomOption?(o(),u("div",ra,[V("input",{ref:F=>l.value=F,id:e.item.tag+"_customfieldvals_"+e.localTagId,value:e.formFieldsValue[e.item.tag],onChange:y[2]||(y[2]=F=>m(e.item)),type:"radio"},null,40,sa),V("label",{id:e.item.tag+"_customfieldvals_label",for:e.item.tag+"_customfieldvals_"+e.localTagId},null,8,oa),V("input",{for:e.item.tag+"_customfieldvals_label_"+e.localTagId,onFocus:y[3]||(y[3]=F=>s(e.item,F)),onInput:y[4]||(y[4]=F=>f(e.item,F)),onKeydown:y[5]||(y[5]=Q(A(F=>c(e.item),["prevent"]),["enter"])),type:"text",placeholder:"Press enter to add custom option",class:"add-custom-opt"},null,40,da)])):k("",!0),h(a)?(o(),u("div",ua,E(h(a)),1)):k("",!0)],2))}});const ca=["innerHTML"],ha={key:1},ma={key:0},fa=["id","value","name","checked","onChange","data-q","data-required"],va=["for"],ga={key:2,id:"error-container",class:"error"},Nl=I({__name:"CheckBoxElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},localTagId:{type:String},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","handleCheckBox","updateFormFieldsValue"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>t.kind=="form"),a=C(()=>t.kind=="survey"),l=C(()=>t.errors[t.item.tag]),c=T([]),m=(d,v)=>{const p=c.value[d].value,x=c.value[d].checked;if(a.value)n("handleCheckBox",{item:v,index:d,checkVal:p,isChecked:x});else if(x){const y=t.formFieldsValue[v.tag]?t.formFieldsValue[v.tag]:[];n("updateFormFieldsValue",{tag:v.tag,value:[...y,p]})}else{const y=t.formFieldsValue[v.tag].filter(F=>F!==p);n("updateFormFieldsValue",{tag:v.tag,value:y})}},f=()=>{if(a.value)return;const d=t.formFieldsValue[t.item.tag];t.item.required&&!(d!=null&&d.length)?s(t.item.tag,"Please choose at least one option"):s(t.item.tag,null)},s=(d,v)=>{n("addOrUpdateError",{tag:d,error:v})};return i({validate:f,item:t.item}),(d,v)=>(o(),u("div",{class:D(["form-builder--item",{"d-none":e.item.hidden,"form-builder--item-input":h(a)}])},[h(a)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,ca)):k("",!0),e.formLabelVisible?(o(),u("label",ha,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",ma,"*")):k("",!0)])):k("",!0),(o(!0),u(te,null,ie(e.item.picklistOptions,(p,x)=>(o(),u("div",{key:x,class:"in-r-c"},[V("input",{id:p+"_"+e.item.tag+"_"+x+"_"+e.localTagId,ref_for:!0,ref:y=>h(c)[x]=y,value:p,name:h(r)?e.item.tag:p,checked:e.formFieldsValue[e.item.tag]!=null&&e.formFieldsValue[e.item.tag].indexOf(p)>=0,onChange:y=>m(x,e.item),type:"checkbox","data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,40,fa),V("label",{style:{"margin-left":"10px"},for:p+"_"+e.item.tag+"_"+x+"_"+e.localTagId},E(p),9,va)]))),128)),h(l)?(o(),u("div",ga,E(h(l)),1)):k("",!0)],2))}});const ya=["innerHTML"],pa={key:1},ba={key:0},wa={class:"input-group"},ka={class:"input-group-prepend"},Va={class:"input-group-text"},Sa=["placeholder","name","data-q","data-required"],Oa={key:2,id:"error-container",class:"error"},Wl=I({__name:"MonetaryElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},localeCurrency:{type:Object},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","isSlideMovable","updateFormFieldsValue"],setup(e,{expose:i,emit:n}){const t=e;C(()=>t.kind=="form");const r=C(()=>t.kind=="survey"),a=C(()=>t.errors[t.item.tag]),l=T(),c=s=>{r.value&&n("isSlideMovable",s)},m=()=>{var d;let s=(d=t.formFieldsValue[t.item.tag])==null?void 0:d.replace(/,/g,"");s&&isNaN(s)?f(t.item.tag,"Invalid Monetory format!"):t.item.required&&ne(s)?f(t.item.tag,`${t.item.label} is required`):(f(t.item.tag,null),!isNaN(s)&&s!==""&&(s=parseFloat(s).toFixed(2).toString()),n("updateFormFieldsValue",{tag:t.item.tag,value:s}))},f=(s,d)=>{n("addOrUpdateError",{tag:s,error:d})};return i({validate:m,item:t.item}),(s,d)=>(o(),u("div",{class:D(["form-builder--item",{"d-none":e.item.hidden,"form-builder--item-input":h(r)}])},[h(r)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,ya)):k("",!0),e.formLabelVisible?(o(),u("label",pa,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",ba,"*")):k("",!0)])):k("",!0),V("div",wa,[V("div",ka,[V("span",Va,E(e.localeCurrency.currency.symbol),1)]),H(V("input",{ref:v=>l.value=v,placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,"onUpdate:modelValue":d[0]||(d[0]=v=>e.formFieldsValue[e.item.tag]=v),onKeydown:d[1]||(d[1]=Q(A(v=>c({}),["prevent"]),["enter"])),type:"text",class:"form-control","data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,40,Sa),[[oe,e.formFieldsValue[e.item.tag]]])]),h(a)?(o(),u("div",Oa,E(h(a)),1)):k("",!0)],2))}});const Fa={key:0},xa={key:0},$a=["id","value"],Ca={key:1,class:"error"},zl=I({__name:"CaptchaElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},surveyFieldValidate:{type:Array},validationError:{type:Object},captchaInputValue:{type:String},localTagId:{type:String}},emits:["updateCaptchaToken","updateValidationError","updateIsCaptchaVerified"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>t.kind=="form"),a=C(()=>t.kind=="survey"),l=T(),c=v=>{if(!!v){if(r.value)l.value&&(l.value.value="1",f({})),s("1");else{s(!0);const p=t.surveyFieldValidate.findIndex(x=>x.type==="captcha");p!==-1&&t.surveyFieldValidate.splice(p,1)}d(v)}},m=()=>{r.value?(s("0"),f({captcha:"Verification expired"})):s(!1)},f=v=>{n("updateValidationError",v)},s=v=>{n("updateIsCaptchaVerified",v)},d=v=>{n("updateCaptchaToken",v)};return i({item:t.item}),(v,p)=>(o(),u("div",{class:D(["form-builder--item",{"d-none":e.item.hidden,"form-builder--item-input":h(a)}])},[e.formLabelVisible?(o(),u("label",Fa,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",xa,"*")):k("",!0)])):k("",!0),V("input",{id:"captchaInput_"+e.localTagId,type:"hidden",ref:"captchaInput"+e.localTagId,value:e.captchaInputValue},null,8,$a),U(Rt,{onExpired:m,onVerify:c}),e.validationError&&e.validationError.captcha?(o(),u("span",Ca,E(e.validationError.captcha),1)):k("",!0)],2))}}),Ea={class:"form-builder--item form-builder--image"},Yl=I({__name:"ImageElement",props:{kind:{type:String},item:{type:Object},surveyId:{type:String,required:!1}},setup(e){const i=e;C(()=>i.kind=="form"),C(()=>i.kind=="survey");const n=T();return(t,r)=>(o(),u("div",{class:"form-builder--img-wrap",style:Le({justifyContent:e.item.align=="left"?"flex-start":e.item.align=="right"?"flex-end":"center"}),ref:a=>n.value=a},[V("div",Ea,[U(He,{url:e.item.url,alt:e.item.alt,style:Le({width:e.item.width?e.item.width+"px":"100%",height:e.item.height?e.item.height+"px":"100%"})},null,8,["url","alt","style"])])],4))}}),La=["innerHTML"],Ta={key:1},Da={key:0},Ma=["placeholder","name","data-q","data-required"],Pa={key:2,id:"error-container",class:"error"},Kl=I({__name:"TextAreaElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>t.kind=="survey"),a=C(()=>t.errors[t.item.tag]),l=()=>{if(r.value)return;const m=t.formFieldsValue[t.item.tag];t.item.required&&ne(m)?c(t.item.tag,`${t.item.label} is required`):c(t.item.tag,null)},c=(m,f)=>{n("addOrUpdateError",{tag:m,error:f})};return i({validate:l,item:t.item}),(m,f)=>(o(),u("div",{class:D(["form-builder--item field-container",{"d-none":e.item.hidden,"form-builder--item-input":h(r)}])},[h(r)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,La)):k("",!0),e.formLabelVisible?(o(),u("label",Ta,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",Da,"*")):k("",!0)])):k("",!0),H(V("textarea",{"onUpdate:modelValue":f[0]||(f[0]=s=>e.formFieldsValue[e.item.tag]=s),placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,class:"form-control","data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,8,Ma),[[oe,e.formFieldsValue[e.item.tag]]]),h(a)?(o(),u("div",Pa,E(h(a)),1)):k("",!0)],2))}});const Aa=["innerHTML"],qa={key:1},ja={key:0},Ua={class:"col-md-12"},Ba=["for"],Ra={class:"option col-8 pl-0 mb-2"},Ha=["id","onUpdate:modelValue","name"],Ia={key:2,id:"error-container",class:"error"},Ql=I({__name:"TextBoxListElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},localTagId:{type:String},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>t.kind=="form"),a=C(()=>t.kind=="survey"),l=C(()=>t.errors[t.item.tag]),c=()=>{if(a.value)return;const f=t.formFieldsValue[t.item.tag];if(t.item.required){const s=Object.values(f);if(s.filter(v=>v===""||v===void 0||v==null).length===s.length){m(t.item.tag,`${t.item.label} is required`);return}m(t.item.tag,null)}else m(t.item.tag,null)},m=(f,s)=>{n("addOrUpdateError",{tag:f,error:s})};return i({validate:c,item:t.item}),(f,s)=>(o(),u("div",{class:D(["form-builder--item field-container",{"d-none":e.item.hidden,"form-builder--item-input":h(a)}])},[h(a)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,Aa)):k("",!0),e.formLabelVisible?(o(),u("label",qa,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",ja,"*")):k("",!0)])):k("",!0),V("div",{class:D({"row ":h(a),"textbox-list-opt":h(r)})},[V("div",Ua,[V("table",{class:D({"w-100":h(r)})},[V("tbody",null,[(o(!0),u(te,null,ie(e.item.picklistOptions,(d,v)=>(o(),u("tr",{key:v},[V("td",null,[V("label",{for:"textbox_"+e.item.tag+"_"+v+"_"+e.localTagId},E(d.label),9,Ba)]),V("td",null,[V("div",Ra,[H(V("input",{id:"textbox_"+e.item.tag+"_"+v+"_"+e.localTagId,ref_for:!0,ref:"textbox_"+e.item.tag+"_"+v,"onUpdate:modelValue":p=>e.formFieldsValue[e.item.tag][d.id]=p,name:e.item.tag,type:"text",class:"form-control",placeholder:"Value"},null,8,Ha),[[oe,e.formFieldsValue[e.item.tag][d.id]]])])])]))),128))])],2)])],2),h(l)?(o(),u("div",Ia,E(h(l)),1)):k("",!0)],2))}});const Na={class:"form-builder--item heading-element"},Wa=["innerHTML"],za={key:1},Xl=I({__name:"HeadingElement",props:{item:{type:Object}},setup(e){var l;const i=e,n=T(),t=T((l=i.item)==null?void 0:l.label);ke(()=>{!n.value||(n.value.innerHTML=t.value)});const r=T({color:"000000",size:"40",weight:"400",align:"left"}),a=C(()=>{var c;return(c=i==null?void 0:i.item)!=null&&c.bgColor?{color:"#"+(i.item.color||r.value.color),backgroundColor:"#"+i.item.bgColor,border:i.item.border.border+"px "+i.item.border.type+" #"+i.item.border.color,borderRadius:i.item.border.radius+"px",fontFamily:i.item.fontFamily,fontSize:(i.item.fontSize||r.value.size)+"px",fontWeight:i.item.weight||r.value.weight,textAlign:i.item.textAlign||r.value.align,padding:i.item.padding.top+"px "+i.item.padding.right+"px "+i.item.padding.bottom+"px "+i.item.padding.left+"px",boxShadow:i.item.shadow.horizontal+"px "+i.item.shadow.vertical+"px "+i.item.shadow.blur+"px "+i.item.shadow.spread+"px #"+i.item.shadow.color,lineHeight:"1.5"}:{color:"#"+(i.item.color||r.value.color),fontFamily:i.item.font||"inherit",fontSize:(i.item.size||r.value.size)+"px",fontWeight:i.item.weight||r.value.weight,textAlign:i.item.align||r.value.align,lineHeight:"1.2"}});return(c,m)=>(o(),u("div",Na,[V("div",{class:"text-element",style:Le(h(a))},[e.item.bgColor?(o(),u("div",{key:0,innerHTML:h(t),ref_key:"textRenderer",ref:n},null,8,Wa)):(o(),u("div",za,E(h(Lt)(e.item.label)),1))],4)]))}}),Ya=["innerHTML"],Ka={key:1},Qa={key:0},Xa=["placeholder","name","data-q","data-required"],Ga={key:2,id:"error-container",class:"error"},Gl=I({__name:"EmailElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","isSlideMovable"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>t.kind=="survey"),a=C(()=>t.errors[t.item.tag]),l=f=>{r.value&&n("isSlideMovable",f)},c=()=>{if(r.value)return;const f=t.formFieldsValue[t.item.tag];if(t.item.required&&ne(f))m(t.item.tag,"Email is required");else{if(!Ki(f)){m(t.item.tag,"Email is invalid!");return}m(t.item.tag,null)}},m=(f,s)=>{n("addOrUpdateError",{tag:f,error:s})};return i({validate:c,item:t.item}),(f,s)=>(o(),u("div",{class:D(["form-builder--item field-container",{"d-none":e.item.hidden,"form-builder--item-input":e.kind==="survey"}])},[h(r)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description",style:{display:"block"}},null,8,Ya)):k("",!0),e.formLabelVisible?(o(),u("label",Ka,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",Qa,"*")):k("",!0)])):k("",!0),H(V("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>e.formFieldsValue[e.item.tag]=d),placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,onKeydown:s[1]||(s[1]=Q(A(d=>l({}),["prevent"]),["enter"])),type:"email",class:"form-control","data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,40,Xa),[[oe,e.formFieldsValue[e.item.tag]]]),h(a)?(o(),u("div",Ga,E(h(a)),1)):k("",!0)],2))}});const Za=["innerHTML"],Ja={key:1},_a={key:0},el=["placeholder","name","data-q","data-required"],tl={key:2,id:"error-container",class:"error"},Zl=I({__name:"NumberElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","isSlideMovable"],setup(e,{expose:i,emit:n}){const t=e,r=s=>{var d,v;![void 0,""].includes((v=t.formFieldsValue)==null?void 0:v[(d=t.item)==null?void 0:d.tag])&&[45,43].includes(s.charCode)&&s.preventDefault()};C(()=>t.kind=="form");const a=C(()=>t.kind=="survey"),l=C(()=>t.errors[t.item.tag]),c=s=>{a.value&&n("isSlideMovable",s)},m=()=>{if(a.value)return;const s=t.formFieldsValue[t.item.tag];t.item.required&&ne(s)?f(t.item.tag,`${t.item.label} is required`):f(t.item.tag,null)},f=(s,d)=>{n("addOrUpdateError",{tag:s,error:d})};return i({validate:m,item:t.item}),(s,d)=>(o(),u("div",{class:D(["form-builder--item field-container",{"d-none":e.item.hidden,"form-builder--item-input":h(a)}])},[h(a)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,Za)):k("",!0),e.formLabelVisible?(o(),u("label",Ja,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",_a,"*")):k("",!0)])):k("",!0),H(V("input",{"onUpdate:modelValue":d[0]||(d[0]=v=>e.formFieldsValue[e.item.tag]=v),placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,onKeydown:d[1]||(d[1]=Q(A(v=>c({}),["prevent"]),["enter"])),onKeypress:r,type:"number",step:"any",class:"form-control","data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,40,el),[[oe,e.formFieldsValue[e.item.tag]]]),h(l)?(o(),u("div",tl,E(h(l)),1)):k("",!0)],2))}});const il=["innerHTML"],nl={key:1},al={key:0},ll=["value","name","placeholder","data-q","data-required"],rl={key:2,id:"error-container",class:"error"},Jl=I({__name:"PhoneElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},phoneCountryIncluded:{type:Object},phoneCountryCode:{type:Object},formattedPhone:{type:Object},locationCountry:{type:String},phoneFields:{type:Object},phoneCountryDerived:{type:String},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","isSlideMovable","customFieldPhoneNumberUpdate","updatePhoneCountryDerived"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>{var w;return((w=t.item)==null?void 0:w.enableCountryPicker)!==!1});At();const a=T(),l=T(),c=()=>{ot(()=>{at(lt(r,{intlTelFunc:()=>{r.value&&rt(p)}}))})};ke(()=>{nt.getGeoLocation().then(w=>{const b=w.country!=="ZZ"?w.country:void 0;t.phoneCountryCode[t.item.tag]=b,x(b),t.phoneCountryIncluded[t.item.tag]&&t.phoneCountryCode[t.item.tag]&&d({tag:t.item.tag})}).catch(w=>{console.error("Error while fetching headers: ",w)})});const m=w=>{t.phoneCountryIncluded[t.item.tag]=w.target.value},f=C(()=>t.kind=="survey"),s=C(()=>t.errors[t.item.tag]),d=w=>{n("customFieldPhoneNumberUpdate",w)},v=w=>{f.value&&n("isSlideMovable",w)},p=()=>{var b;const w=l.value;w&&(a.value=(b=window==null?void 0:window.intlTelInput)==null?void 0:b.call(window,w,{preferredCountries:["us","gb","ca","au"],initialCountry:t.locationCountry.toLowerCase()||"us"}),w.addEventListener("countrychange",()=>{if(!a.value)return;const $=a.value.getNumber(),L=a.value.getSelectedCountryData().iso2;t.phoneCountryIncluded[w.name]=$,t.phoneCountryCode[w.name]=L?L.toUpperCase():"US",d({tag:w.name})}))},x=w=>{n("updatePhoneCountryDerived",w)},y=()=>{try{if(f.value)return;const w=t.phoneCountryIncluded[t.item.tag];t.item.required&&ne(w)?F(t.item.tag,`${t.item.label} is required`):w&&!ht(w,t.phoneCountryCode[t.item.tag]?t.phoneCountryCode[t.item.tag]:t.locationCountry)?F(t.item.tag,"Invalid phone number"):F(t.item.tag,null)}catch(w){console.error(w)}},F=(w,b)=>{n("addOrUpdateError",{tag:w,error:b})};return ce(()=>t.phoneCountryDerived,(w,b)=>{w!==b&&r.value&&p()}),it(()=>{var w;(w=a.value)==null||w.destroy()}),i({validate:y,item:t.item}),(w,b)=>H((o(),u("div",null,[V("div",{class:D(["form-builder--item field-container",{"d-none":e.item.hidden,"form-builder--item-input":h(f)}])},[h(f)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,il)):k("",!0),e.formLabelVisible?(o(),u("label",nl,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",al,"*")):k("",!0)])):k("",!0),V("input",{type:"tel",value:e.formattedPhone[e.item.tag],onInput:m,name:e.item.tag,placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,autocomplete:"off",class:D(h(r)?"countryphone":"form-control"),ref:$=>l.value=$,onKeyup:b[0]||(b[0]=$=>d(e.item)),onKeydown:b[1]||(b[1]=Q(A($=>v({}),["prevent"]),["enter"])),"data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,42,ll),h(s)?(o(),u("div",rl,E(h(s)),1)):k("",!0)],2)])),[[h(st),c]])}});const sl=["id"],ol=["innerHTML"],dl={key:1},ul={key:0},cl=["value","name","placeholder","id","data-q","data-required"],hl=["placeholder","name","id","data-q","data-required"],ml=["type","placeholder","name","id","data-q","data-required"],fl={key:5,id:"error-container",class:"error"},_l=I({__name:"TextElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},phoneCountryIncluded:{type:Object},phoneCountryCode:{type:Object},formattedPhone:{type:Object},locationCountry:{type:String},formFieldsValue:{type:Object},phoneFields:{type:Object},phoneCountryDerived:{type:String},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","isSlideMovable","customFieldPhoneNumberUpdate","updatePhoneCountryDerived"],setup(e,{expose:i,emit:n}){const t=e,r=C(()=>{var b;return((b=t.item)==null?void 0:b.enableCountryPicker)!==!1}),a=T(),l=T(),c=b=>{t.phoneCountryIncluded[t.item.tag]=b.target.value},m=C(()=>t.kind=="form"),f=C(()=>t.kind=="survey"),s=C(()=>t.errors[t.item.tag]),d=()=>{var b;((b=t.item)==null?void 0:b.tag)==="phone"&&ot(()=>{at(lt(r,{intlTelFunc:()=>{r.value&&rt(x)}}))})};ke(()=>{var b;((b=t.item)==null?void 0:b.tag)==="phone"&&nt.getGeoLocation().then($=>{const L=$.country!=="ZZ"?$.country:void 0;t.phoneCountryCode[t.item.tag]=L,y(L),t.phoneCountryIncluded[t.item.tag]&&t.phoneCountryCode[t.item.tag]&&v({tag:t.item.tag})}).catch($=>{console.error("Error while fetching headers: ",$)})});const v=b=>{n("customFieldPhoneNumberUpdate",b)},p=b=>{f.value&&n("isSlideMovable",b)},x=()=>{var $;const b=a.value;b&&(l.value=($=window==null?void 0:window.intlTelInput)==null?void 0:$.call(window,b,{preferredCountries:["us","gb","ca","au"],initialCountry:t.locationCountry.toLowerCase()||"us"}),b.addEventListener("countrychange",()=>{if(!l.value)return;const L=l.value.getNumber(),z=l.value.getSelectedCountryData().iso2;t.phoneCountryIncluded[b.name]=L,t.phoneCountryCode[b.name]=z?z.toUpperCase():"US",v({tag:b.name})}))},y=b=>{n("updatePhoneCountryDerived",b)},F=b=>{if(f.value)return;const $=t.formFieldsValue[t.item.tag];t.item.required&&ne($)?w(t.item.tag,`${t.item.label} is required`):t.item.tag==="phone"&&!ht($,t.phoneCountryCode[t.item.tag]?t.phoneCountryCode[t.item.tag]:t.locationCountry)?w(t.item.tag,"Invalid phone number"):t.item.tag==="website"&&!Yi($)?w(t.item.tag,"Invalid url"):w(t.item.tag,null)},w=(b,$)=>{n("addOrUpdateError",{tag:b,error:$})};return ce(()=>t.phoneCountryDerived,(b,$)=>{$!==b&&r.value&&x()}),it(()=>{var b;(b=l.value)==null||b.destroy()}),i({validate:F,item:t.item}),(b,$)=>H((o(),u("div",null,[V("div",{class:D([{"d-none":e.item.hidden},"field-container"])},[V("div",{id:"form-"+e.item.tag,class:D(["form-builder--item",{"form-builder--item-input":e.kind=="survey"}])},[h(f)&&e.item.description!==void 0?(o(),u("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,ol)):k("",!0),e.formLabelVisible?(o(),u("label",dl,[W(E(e.item.label)+" ",1),e.item.required?(o(),u("span",ul,"*")):k("",!0)])):k("",!0),e.item.tag=="phone"?(o(),u("input",{key:2,onInput:c,value:e.formattedPhone[e.item.tag],type:"tel",name:e.item.tag,placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,autocomplete:"off",class:D(h(r)?"countryphone":"form-control"),ref:L=>a.value=L,id:e.item.tag,"data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required,onKeyup:$[0]||($[0]=L=>v(e.item)),onKeydown:$[1]||($[1]=Q(A(L=>p({}),["prevent"]),["enter"]))},null,42,cl)):h(m)&&e.item.tag=="website"?H((o(),u("input",{key:3,"onUpdate:modelValue":$[2]||($[2]=L=>e.formFieldsValue[e.item.tag]=L),placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,type:"text",class:"form-control",id:e.item.tag,"data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,8,hl)),[[oe,e.formFieldsValue[e.item.tag]]]):H((o(),u("input",{key:4,"onUpdate:modelValue":$[3]||($[3]=L=>e.formFieldsValue[e.item.tag]=L),type:e.item.type,placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,onKeydown:$[4]||($[4]=Q(A(L=>p({}),["prevent"]),["enter"])),class:"form-control",id:e.item.tag,"data-q":e.item.hiddenFieldQueryKey,"data-required":e.item.required},null,40,ml)),[[qt,e.formFieldsValue[e.item.tag]]]),h(s)?(o(),u("div",fl,E(h(s)),1)):k("",!0)],10,sl)],2)])),[[h(st),d]])}});export{Hl as A,Rl as B,Bl as C,Ul as D,jl as E,ql as F,zi as G,Wi as H,Si as _,xl as a,El as b,$l as c,Cl as d,Ml as e,Fl as f,Ll as g,Al as h,ne as i,Pl as j,_l as k,Jl as l,Zl as m,Gl as n,Xl as o,Ql as p,Kl as q,Yl as r,Ne as s,Dl as t,Tl as u,Ki as v,zl as w,Wl as x,Nl as y,Il as z};
